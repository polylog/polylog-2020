(()=>{const e=()=>{document.querySelector(".footer").classList.add("js-cta-hovered")},t=()=>{document.querySelector(".footer").classList.remove("js-cta-hovered")};document.querySelector(".btn.is-spinner")&&(document.querySelector(".btn.is-bottom-cta").addEventListener("mouseover",e),document.querySelector(".btn.is-bottom-cta").addEventListener("mouseout",t))})(),jQuery(document).ready((e=>{const t=e(".subscription .form-submit, .webform-client-form-3601 .form-submit"),a=e(".subscription .form-disclaimer, .webform-client-form-3601 .form-disclaimer");function o(){const t=e("#edit-submitted-form-services"),a=e(".webform-component--fieldset-fundraising"),o=e(".webform-component--fieldset-fundraising .optional-required");"fundraising"===t.val()&&a.is(":hidden")?(o.prop("required",!0),a.slideDown(1e3)):"fundraising"!==t.val()&&a.is(":visible")&&(o.removeProp("required"),a.slideUp(1e3))}e(".row.filter, #views-exposed-form-projects-page, #views-exposed-form-projects-en-page").prev(".page-header").css("border-radius","3px"),e(".section-blog.page-thanks .subscription input, .section-blog.page-thanks .subscription button").prop("disabled",!0),e(".form-select").change((function(){e(this).closest("form").find(".form-type-button").removeClass("disabled")})),window.matchMedia("(min-width: 992px)").matches&&(t.mouseover((()=>{a.addClass("open")})),e(document).on("click",(()=>{a.removeClass("open")})),e(document).keydown((e=>{27===e.keyCode&&a.removeClass("open")}))),e(".webform-component--fieldset-fundraising").hide(),e(".modal-content").on("change","#edit-submitted-form-services",o),e("#edit-submitted-form-services").on("change",o)})),jQuery(document).ready((e=>{e(".article > img:not([class]), .article-body > img:not([class]), .article-body > .image.image-_original").wrap('<div class="media-wrapper"></div>'),e(".sec-gallery > img:not([class]), figure.gallery > img:not([class]), #gallery > img:not([class])").wrap('<div class="media-wrapper"></div>'),e("img").error((function(){const t=e(this),a=t.parent("div");t.hide(),a.hide(),a.next(".gallery").hide()})),e(".js-mfp").magnificPopup({type:"image",tLoading:"",removalDelay:300,mainClass:"mfp-fade",fixedContentPos:!0}),e(".js-mfp-video").magnificPopup({type:"iframe",tLoading:"",mainClass:"mfp-fade",iframe:{patterns:{youtube:{src:"https://www.youtube.com/embed/%id%?rel=0&modestbranding=1&autohide=1&showinfo=0&autoplay=1"}}}});let t=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(t=!0)}catch(e){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=!0)}t?e(".video-flash.primary").addClass("play-it"):e(".video.fallback, .video-caption.fallback").addClass("play-it")})),jQuery(document).ready((e=>{e(".js-open-modal").on("click",(function(t){let a="";const o=e("#modal"),i=e(".modal-content");t.preventDefault(),a=e(this).is("a")?e(this).attr("href"):e(this).attr("data-href"),i.load(a+" .js-modal-content",(()=>{e(".webform-component--fieldset-fundraising").hide()})),o.on("hidden.bs.modal",(()=>{i.empty()}))})),e(document).keydown((t=>{27===t.keyCode&&e(".modal").hide}))})),jQuery(document).ready((e=>{e(".js-share").click((function(){const t=e(this),a=t.data("href");t.hasClass("email-md")||t.hasClass("whatsapp")?window.location.href=a:window.open(a,"shareWin","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")})),window.matchMedia("(min-width: 576px)").matches&&(e(".social-options.js-sticky").sticky({topSpacing:27}),e(window).scroll((()=>{const t=e(".social-options.js-sticky");e(".comments, .cta, .footer, .article-related, .out-of-bounds").is(":in-viewport")?t.addClass("hidden"):t.removeClass("hidden")})))}));const setSearchPlaceholder=()=>{const e=document.getElementById("gsc-i-id1"),t=document.getElementsByTagName("html")[0].getAttribute("lang");e&&(window.matchMedia("(max-width: 575px)").matches?e.placeholder="ru"===t?"Поиск":"Site search":window.matchMedia("(min-width: 576px) and (max-width: 991px)").matches?e.placeholder="ru"===t?"Поиск: PR, event-менеджмент":"Search PR and event management":e.placeholder="ru"===t?"Поиск: PR, организация мероприятий, IT-решения":"Search PR, event management and IT solutions")};window.addEventListener("load",(()=>{setSearchPlaceholder();const e=document.querySelector(".gsc-control-wrapper-cse > .gsc-search-box"),t=document.querySelector(".gsib_a > .gsc-input"),a=document.querySelector(".header__search-cancel");document.addEventListener("click",(o=>{o.target.closest(".header__search-toggler")&&(e.classList.add("is-visible"),a.classList.add("is-visible"),t.focus())}),!1),document.addEventListener("click",(t=>{t.target.matches(".header__search-cancel")&&(e.classList.remove("is-visible"),a.classList.remove("is-visible"))}),!1)}),!1),window.addEventListener("resize",(()=>{setSearchPlaceholder()}),!1),jQuery(document).ready((function(e){var t=e(".carousel");e(".carousel.js-manual").carousel({interval:0}),e(".carousel.js-auto").carousel({interval:12e3}),t.swiperight((function(){e(this).carousel("prev")})),t.swipeleft((function(){e(this).carousel("next")}))})),(e=>{function t(){window.matchMedia("(max-width: 767px)").matches?e(".js-menu-link, .navbar-dropdown-toggle-split").attr("data-toggle",""):window.matchMedia("(min-width: 768px) and (max-width: 1199px)").matches?(e(".js-menu-link").attr("data-toggle","dropdown"),e(".navbar-dropdown-toggle-split").attr("data-toggle","")):(e(".js-menu-link").attr("data-toggle",""),e(".navbar-dropdown-toggle-split").attr("data-toggle","dropdown"))}function a(){window.matchMedia("(min-width: 1200px)").matches?e(".navbar-btn-primary").text("Обратная связь"):e(".navbar-btn-primary").text("Пишите")}e(".navbar").mouseleave((()=>{setTimeout((()=>{e(".navbar-item.dropdown.show .navbar-dropdown-toggle-split").attr("aria-expanded","false"),e(".navbar-item.dropdown.show").removeClass("show")}),1500)})),e((()=>{t(),a()})),e(window).resize((()=>{t(),a()}))})(jQuery),document.querySelectorAll(".js-contact").forEach((e=>{e.href=e.href.replace("(at)gmail","@polylog").replace("(dot)com",".ru")}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZm9vdGVyL2Zvb3Rlci5qcyIsImNvbXBvbmVudHMvZm9ybS9mb3JtLmpzIiwiY29tcG9uZW50cy9tZWRpYS9tZWRpYS5qcyIsImNvbXBvbmVudHMvbW9kYWwvbW9kYWwuanMiLCJjb21wb25lbnRzL3NvY2lhbC10b29scy9zb2NpYWwtdG9vbHMuanMiLCJjb21wb25lbnRzL2Zvcm0vc2VhcmNoL3NlYXJjaC5qcyIsImNvbXBvbmVudHMvbWVkaWEvY2Fyb3VzZWwvY2Fyb3VzZWwuanMiLCJjb21wb25lbnRzL25hdi9uYXZiYXIvbmF2YmFyLmpzIiwiYmFzZS9jb250ZW50L2xpbmsvbGluay5qcyJdLCJuYW1lcyI6WyJzcGluVGhlRm9vdGVyV2hlZWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdG9wVGhlRm9vdGVyV2hlZWwiLCJyZW1vdmUiLCJhZGRFdmVudExpc3RlbmVyIiwialF1ZXJ5IiwicmVhZHkiLCIkIiwiJHN1YnNjcmlwdGlvbkJ0biIsIiRkaXNjbGFpbWVyVG9vbHB0aXAiLCJmdW5kcmFpc2luZ0RldGFpbHMiLCIkc2VydmljZXMiLCIkZmllbGRzZXRGdW5kcmFpc2luZyIsIiRmdW5kcmFpc2luZ1JlcXVpcmVkIiwidmFsIiwiaXMiLCJwcm9wIiwic2xpZGVEb3duIiwicmVtb3ZlUHJvcCIsInNsaWRlVXAiLCJwcmV2IiwiY3NzIiwiY2hhbmdlIiwidGhpcyIsImNsb3Nlc3QiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsIm1vdXNlb3ZlciIsImFkZENsYXNzIiwib24iLCJrZXlkb3duIiwiZSIsImtleUNvZGUiLCJoaWRlIiwid3JhcCIsImVycm9yIiwiZWwiLCJ3cmFwcGVyIiwicGFyZW50IiwibmV4dCIsIm1hZ25pZmljUG9wdXAiLCJ0eXBlIiwidExvYWRpbmciLCJyZW1vdmFsRGVsYXkiLCJtYWluQ2xhc3MiLCJmaXhlZENvbnRlbnRQb3MiLCJpZnJhbWUiLCJwYXR0ZXJucyIsInlvdXR1YmUiLCJzcmMiLCJoYXNGbGFzaCIsIkFjdGl2ZVhPYmplY3QiLCJuYXZpZ2F0b3IiLCJtaW1lVHlwZXMiLCJ1bmRlZmluZWQiLCJlbmFibGVkUGx1Z2luIiwiaHJlZiIsIiRtb2RhbCIsIiRjb250YWluZXIiLCJwcmV2ZW50RGVmYXVsdCIsImF0dHIiLCJsb2FkIiwiZW1wdHkiLCJjbGljayIsImRhdGEiLCJoYXNDbGFzcyIsImxvY2F0aW9uIiwib3BlbiIsInN0aWNreSIsInRvcFNwYWNpbmciLCJzY3JvbGwiLCJzZXRTZWFyY2hQbGFjZWhvbGRlciIsImlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJsYW5nIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRBdHRyaWJ1dGUiLCJwbGFjZWhvbGRlciIsInNlYXJjaEZvcm0iLCJzZWFyY2hJbnB1dCIsInNlYXJjaENhbmNlbCIsInRhcmdldCIsImZvY3VzIiwiY2Fyb3VzZWwiLCJpbnRlcnZhbCIsInN3aXBlcmlnaHQiLCJzd2lwZWxlZnQiLCJjb250cm9sRHJvcGRvd25zIiwiY2hhbmdlQ1RBbGFiZWwiLCJ0ZXh0IiwibW91c2VsZWF2ZSIsInNldFRpbWVvdXQiLCJyZXNpemUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQU9BLE1BQ0EsTUFBQUEsRUFBQSxLQUNBQyxTQUFBQyxjQUFBLFdBQUFDLFVBQUFDLElBQUEsbUJBR0FDLEVBQUEsS0FDQUosU0FBQUMsY0FBQSxXQUFBQyxVQUFBRyxPQUFBLG1CQUdBTCxTQUFBQyxjQUFBLHFCQUdBRCxTQUFBQyxjQUFBLHNCQUNBSyxpQkFBQSxZQUFBUCxHQUVBQyxTQUFBQyxjQUFBLHNCQUNBSyxpQkFBQSxXQUFBRixLQWhCQSxHQ0RBRyxPQUFBUCxVQUFBUSxPQUFBQyxJQUVBLE1BQUFDLEVBQUFELEVBQUEsc0VBQ0FFLEVBQUFGLEVBQUEsOEVBb0NBLFNBQUFHLElBQ0EsTUFBQUMsRUFB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Z0IsTUFBQStELFNBQUEsV0FLQUEsRUFBQUcsV0FBQSxXQUNBbEYsRUFBQWdCLE1BQUErRCxTQUFBLGNDMUNBLENBQUEvRSxJQUlBLFNBQUFtRixJQUNBL0QsT0FBQUMsV0FBQSxzQkFBQUMsUUFDQXRCLEVBQUEsZ0RBQUF3RCxLQUFBLGNBQUEsSUFDQXBDLE9BQUFDLFdBQUEsOENBQUFDLFNBS0F0QixFQUFBLGlCQUFBd0QsS0FBQSxjQUFBLFlBQ0F4RCxFQUFBLGlDQUFBd0QsS0FBQSxjQUFBLE1BTUF4RCxFQUFBLGlCQUFBd0QsS0FBQSxjQUFBLElBQ0F4RCxFQUFBLGlDQUFBd0QsS0FBQSxjQUFBLGFBbUNBLFNBQUE0QixJQUNBaEUsT0FBQUMsV0FBQSx1QkFBQUMsUUFDQXRCLEVBQUEsdUJBQUFxRixLQUFBLGtCQUVBckYsRUFBQSx1QkFBQXFGLEtBQUEsVUFkQXJGLEVBQUEsV0FBQXNGLFlBQUEsS0FDQUMsWUFBQSxLQUNBdkYsRUFBQSw0REFBQXdELEtBQUEsZ0JBQUEsU0FDQXhELEVBQUEsOEJBQUFtQixZQUFBLFVBQ0EsU0FlQW5CLEdBQUEsS0FDQW1GLElBQ0FDLE9BSUFwRixFQUFBb0IsUUFBQW9FLFFBQUEsS0FDQUwsSUFDQUMsUUF4RUEsQ0EwRUF0RixRQ3RFQVAsU0FBQWtHLGlCQUFBLGVBQUFDLFNBQUExRCxJQUNBQSxFQUNBb0IsS0FBQXBCLEVBQUFvQixLQUNBdUMsUUFBQSxZQUFBLFlBQ0FBLFFBQUEsV0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRm9vdGVyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogU3BpbiBmb290ZXIgd2hlZWwgb24gQ1RBIGhvdmVyIG9uIHRoZSBDaGluZXNlIGFuZCBKYXBhbmVzZSBsYW5kaW5ncy5cbiAqL1xuXG4oKCkgPT4ge1xuICBjb25zdCBzcGluVGhlRm9vdGVyV2hlZWwgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3RlcicpLmNsYXNzTGlzdC5hZGQoJ2pzLWN0YS1ob3ZlcmVkJyk7XG4gIH07XG5cbiAgY29uc3Qgc3RvcFRoZUZvb3RlcldoZWVsID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdqcy1jdGEtaG92ZXJlZCcpO1xuICB9O1xuXG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4uaXMtc3Bpbm5lcicpO1xuXG4gIGlmIChidG4pIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLmlzLWJvdHRvbS1jdGEnKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHNwaW5UaGVGb290ZXJXaGVlbCk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLmlzLWJvdHRvbS1jdGEnKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0Jywgc3RvcFRoZUZvb3RlcldoZWVsKTtcbiAgfVxufSkoKTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEZPUk1cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuXG4gIGNvbnN0ICRzdWJzY3JpcHRpb25CdG4gPSAkKCcuc3Vic2NyaXB0aW9uIC5mb3JtLXN1Ym1pdCwgLndlYmZvcm0tY2xpZW50LWZvcm0tMzYwMSAuZm9ybS1zdWJtaXQnKTtcbiAgY29uc3QgJGRpc2NsYWltZXJUb29scHRpcCA9ICQoJy5zdWJzY3JpcHRpb24gLmZvcm0tZGlzY2xhaW1lciwgLndlYmZvcm0tY2xpZW50LWZvcm0tMzYwMSAuZm9ybS1kaXNjbGFpbWVyJyk7XG5cbiAgLyoqXG4gICAqIFJvdW5kIGNvcm5lcnMgb2YgcGFnZSBoZWFkZXIgb2YgMm5kIGFuZCB0aGUgbmV4dCByd3N1bHQgcGFnZXMgYW5kIGxheWVkXG4gICAqIG91dCBhYm92ZSB0aGUgcHJvamVjdHMgZmlsdGVyXG4gICAqL1xuICAkKCcucm93LmZpbHRlciwgI3ZpZXdzLWV4cG9zZWQtZm9ybS1wcm9qZWN0cy1wYWdlLCAjdmlld3MtZXhwb3NlZC1mb3JtLXByb2plY3RzLWVuLXBhZ2UnKS5wcmV2KCcucGFnZS1oZWFkZXInKS5jc3MoJ2JvcmRlci1yYWRpdXMnLCAnM3B4Jyk7XG5cbiAgLy8gRGlzYWJsZSBzdWJzY3JpcHRpb24gZm9ybSBvbiBpdCB0aGFuayB5b3UgcGFnZS5cbiAgJCgnLnNlY3Rpb24tYmxvZy5wYWdlLXRoYW5rcyAuc3Vic2NyaXB0aW9uIGlucHV0LCAuc2VjdGlvbi1ibG9nLnBhZ2UtdGhhbmtzIC5zdWJzY3JpcHRpb24gYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAvLyBUb2dsZSBmaWx0ZXIgYnV0dG9uXG4gICQoJy5mb3JtLXNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbiBlbmFibGVGaWx0ZXJCdXR0b24oKXtcbiAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZm9ybS10eXBlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgfSk7XG5cbiAgLy8gU2hvdyBkaXNjbGFpbWVyIHRvb2xwdGlwIG9uIHN1YnNjcmlwdGlvblxuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDk5MnB4KScpLm1hdGNoZXMpIHtcbiAgICAkc3Vic2NyaXB0aW9uQnRuLm1vdXNlb3ZlcigoKSA9PiB7XG4gICAgICAkZGlzY2xhaW1lclRvb2xwdGlwLmFkZENsYXNzKCdvcGVuJyk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAkZGlzY2xhaW1lclRvb2xwdGlwLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5rZXlkb3duKChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgICAgICAkZGlzY2xhaW1lclRvb2xwdGlwLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVE9HR0xFIEZVTkRSQUlTSU5HIEZJRUxEU0VUXG4gICAqL1xuICBmdW5jdGlvbiBmdW5kcmFpc2luZ0RldGFpbHMgKCkge1xuICAgIGNvbnN0ICRzZXJ2aWNlcyA9ICQoJyNlZGl0LXN1Ym1pdHRlZC1mb3JtLXNlcnZpY2VzJyk7XG4gICAgY29uc3QgJGZpZWxkc2V0RnVuZHJhaXNpbmcgPSAkKCcud2ViZm9ybS1jb21wb25lbnQtLWZpZWxkc2V0LWZ1bmRyYWlzaW5nJyk7XG4gICAgY29uc3QgJGZ1bmRyYWlzaW5nUmVxdWlyZWQgPSAkKCcud2ViZm9ybS1jb21wb25lbnQtLWZpZWxkc2V0LWZ1bmRyYWlzaW5nIC5vcHRpb25hbC1yZXF1aXJlZCcpO1xuXG4gICAgaWYoJHNlcnZpY2VzLnZhbCgpID09PSAnZnVuZHJhaXNpbmcnICYmICRmaWVsZHNldEZ1bmRyYWlzaW5nLmlzKCc6aGlkZGVuJykpIHtcbiAgICAgICRmdW5kcmFpc2luZ1JlcXVpcmVkLnByb3AoJ3JlcXVpcmVkJyx0cnVlKTtcbiAgICAgICRmaWVsZHNldEZ1bmRyYWlzaW5nLnNsaWRlRG93bigxMDAwKTtcbiAgICB9IGVsc2UgaWYgKCRzZXJ2aWNlcy52YWwoKSAhPT0gJ2Z1bmRyYWlzaW5nJyAmJiAkZmllbGRzZXRGdW5kcmFpc2luZy5pcygnOnZpc2libGUnKSkge1xuICAgICAgJGZ1bmRyYWlzaW5nUmVxdWlyZWQucmVtb3ZlUHJvcCgncmVxdWlyZWQnKTtcbiAgICAgICRmaWVsZHNldEZ1bmRyYWlzaW5nLnNsaWRlVXAoMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGlkZSBmaWVsZHNldCBvbiBmdWxsIHBhZ2VcbiAgJCgnLndlYmZvcm0tY29tcG9uZW50LS1maWVsZHNldC1mdW5kcmFpc2luZycpLmhpZGUoKTtcblxuICAvLyBUb2dnbGUgZmllbGRzZXQgaW4gbW9kYWxcbiAgJCgnLm1vZGFsLWNvbnRlbnQnKS5vbignY2hhbmdlJywgJyNlZGl0LXN1Ym1pdHRlZC1mb3JtLXNlcnZpY2VzJywgZnVuZHJhaXNpbmdEZXRhaWxzKTtcblxuICAvLyBUb2dnbGUgZmllbGRzZXQgb24gZnVsbCBwYWdlXG4gICQoJyNlZGl0LXN1Ym1pdHRlZC1mb3JtLXNlcnZpY2VzJykub24oJ2NoYW5nZScsIGZ1bmRyYWlzaW5nRGV0YWlscyk7XG59KTtcblxuXG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBNRURJQVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KCgkKSA9PiB7XG5cbiAgLy8gV3JhcCBpbWFnZSB0byBtYWtlIHJvdW5kZWQgY29sb3JzIGFuZCBzZW1pdHJhbnNwYXJlbnQgaW5uZXIgYm9yZGVyXG4gICQoJy5hcnRpY2xlID4gaW1nOm5vdChbY2xhc3NdKSwgLmFydGljbGUtYm9keSA+IGltZzpub3QoW2NsYXNzXSksIC5hcnRpY2xlLWJvZHkgPiAuaW1hZ2UuaW1hZ2UtX29yaWdpbmFsJykud3JhcCgnPGRpdiBjbGFzcz1cIm1lZGlhLXdyYXBwZXJcIj48L2Rpdj4nKTtcbiAgJCgnLnNlYy1nYWxsZXJ5ID4gaW1nOm5vdChbY2xhc3NdKSwgZmlndXJlLmdhbGxlcnkgPiBpbWc6bm90KFtjbGFzc10pLCAjZ2FsbGVyeSA+IGltZzpub3QoW2NsYXNzXSknKS53cmFwKCc8ZGl2IGNsYXNzPVwibWVkaWEtd3JhcHBlclwiPjwvZGl2PicpO1xuXG4gIC8vIEhpZGUgYnJva2VuIGltYWdlc1xuICAkKCdpbWcnKS5lcnJvcihmdW5jdGlvbiBoaWRlQnJva2VuSW1nICgpIHtcbiAgICBjb25zdCBlbCA9ICQodGhpcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgY29uc3Qgd3JhcHBlciA9IGVsLnBhcmVudCgnZGl2Jyk7XG4gICAgZWwuaGlkZSgpO1xuICAgIHdyYXBwZXIuaGlkZSgpO1xuICAgIHdyYXBwZXIubmV4dCgnLmdhbGxlcnknKS5oaWRlKCk7XG4gIH0pO1xuXG4gIC8vIDEpIFZpZGVvLiBSZXF1aXJlZCBVUkwgZm9ybWF0IGlzXG4gIC8vIGh0dHA6Ly93d3cueW91dHViZS5jb20vZW1iZWQvUHpCazQtYXdZNDBcbiAgLy8gd2UgY291bGQgYWxzbyBhZGQgc29tZSBwYXJhbWV0ZXJlc1xuICAvLyA/cmVsPTAmbW9kZXN0YnJhbmRpbmc9MSZhdXRvaGlkZT0xJnNob3dpbmZvPTAmYXV0b3BsYXk9MVxuICAvLyBBdmFpbGFibGUgb3B0aW9ucyA6XG4gIC8vIHBhZGRpbmcgU3BhY2UgaW5zaWRlIGZhbmN5Qm94IGFyb3VuZCBjb250ZW50XG4gIC8vIG1hcmdpbiBNaW5pbXVtIHNwYWNlIGJldHdlZW4gdmlld3BvcnQgYW5kIGZhbmN5Qm94XG4gIC8vIHdpZHRoLCBoZWlnaHQsIG1pbldpZHRoLCBtaW5IZWlnaHRcbiAgLy8gYXV0b1NpemUgSWYgZmFsc2UsIHRoZSBib3ggd2lsbCBub3QgYmUgcmVzaXplZCB0byBmaXQgY29udGVudFxuICAvLyBhdXRvUmVzaXplIElmIGZhbHNlLCB0aGUgY29udGVudCB3aWxsIG5vdCBiZSByZXNpemVkIGFmdGVyIHdpbmRvdyByZXNpemVcbiAgLy8gY2xvc2VCdG5cbiAgLy8gZXRjOiBodHRwOi8vZmFuY3lhcHBzLmNvbS9mYW5jeWJveC9cbiAgLy8gMikgSW1hZ2VcbiAgLy8gMykgSW1hZ2VzIHdvbid0IGJlIHNjYWxlZCB0byBmaXQgdG8gYnJvd3NlcidzIGhlaWdodFxuICAvLyA0KSBJbWFnZXMgd29uJ3QgZXhjZWVkIHRoZSBicm93c2VyJ3Mgd2lkdGhcblxuICAvLyAkKCcuanMtZmFuY3lib3gtdmlkZW8nKS5mYW5jeWJveCh7IC8vIDFcblxuICAvLyAgIGNsb3NlRWZmZWN0OiAnbm9uZScsXG4gIC8vICAgLy8gb3BlbkVmZmVjdDogJ2VsYXN0aWMnLFxuICAvLyAgIHBhZGRpbmc6IDEyLFxuICAvLyAgIHRvcFJhdGlvOiAuMyxcbiAgLy8gICBtYXhXaWR0aDogODAwLFxuICAvLyAgIG1heEhlaWdodDogNDU4XG5cbiAgLy8gfSk7XG5cbiAgLy8gJCgnLmpzLWZhbmN5Ym94JykuZmFuY3lib3goeyAvLyAyXG4gIC8vICAgY2xvc2VFZmZlY3Q6ICdub25lJyxcbiAgLy8gICBmaXRUb1ZpZXc6IGZhbHNlLCAvLyAzXG4gIC8vICAgbWF4V2lkdGg6ICc5OCUnLCAvLyA0XG4gIC8vICAgcGFkZGluZzogMTIsXG4gIC8vICAgdGl0bGVTaG93OiBmYWxzZVxuICAvLyB9KTtcblxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBNYWduaWZpYyBQb3B1cCBJbWFnZVxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8vIDEpIFJlbW92ZSB0ZXh0IGZyb20gcHJlbG9hZGVyXG4gIC8vIDIpIFN0cmluZyB0aGF0IGNvbnRhaW5zIGNsYXNzZXMgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSByb290IGVsZW1lbnQgb2ZcbiAgLy8gcG9wdXAgd3JhcHBlciBhbmQgdG8gZGFyayBvdmVybGF5XG5cbiAgJCgnLmpzLW1mcCcpLm1hZ25pZmljUG9wdXAoe1xuICAgIHR5cGU6ICdpbWFnZScsXG4gICAgdExvYWRpbmc6ICcnLCAvLyAxXG4gICAgcmVtb3ZhbERlbGF5OiAzMDAsXG4gICAgbWFpbkNsYXNzOiAnbWZwLWZhZGUnLCAvLyAyXG4gICAgZml4ZWRDb250ZW50UG9zOiB0cnVlXG4gIH0pO1xuXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgIE1hZ25pZmljIFBvcHVwIFZpZGVvXG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLy8gMSkgUmVtb3ZlIHRleHQgZnJvbSBwcmVsb2FkZXJcbiAgLy8gMikgQnkgZGVmYXVsdCBNYWduaWZpYyBQb3B1cCBzdXBwb3J0cyBvbmx5IG9uZSB0eXBlIG9mIFVSTCBmb3IgZWFjaFxuICAvLyBzZXJ2aWNlOlxuICAvLyBZb3VUdWJlXG4gIC8vIGh0dHA6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1XVjc1SDJvcVN2SVxuICAvLyBWaW1lb1xuICAvLyBodHRwOi8vdmltZW8uY29tLzEyMzEyM1xuICAvLyBHb29nbGUgTWFwc1xuICAvLyBodHRwczovL21hcHMuZ29vZ2xlLmNvbS9tYXBzP3E9MjIxQitCYWtlcitTdHJlZXQsK0xvbmRvbiwrVW5pdGVkK0tpbmdkb20maGw9ZW4mdD12JmhuZWFyPTIyMUIrQmFrZXIrU3QsK0xvbmRvbitOVzErNlhFLCtVbml0ZWQrS2luZ2RvbVxuICAvLyAzKSBCdXQgaXQgY2FuIGJlIHJld3JpdGVkIHcvIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuXG4gICQoJy5qcy1tZnAtdmlkZW8nKS5tYWduaWZpY1BvcHVwKHtcbiAgICB0eXBlOiAnaWZyYW1lJyxcbiAgICB0TG9hZGluZzogJycsIC8vIDFcbiAgICBtYWluQ2xhc3M6ICdtZnAtZmFkZScsXG5cbiAgICBpZnJhbWU6IHtcbiAgICAgIHBhdHRlcm5zOiB7XG4gICAgICAgIHlvdXR1YmU6IHsgLy8gMlxuICAgICAgICAgIHNyYzogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyVpZCU/cmVsPTAmbW9kZXN0YnJhbmRpbmc9MSZhdXRvaGlkZT0xJnNob3dpbmZvPTAmYXV0b3BsYXk9MScgLy8gM1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgRmxhc2hcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBsZXQgaGFzRmxhc2ggPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBmbyA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgnU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2gnKTtcbiAgICBpZiAoZm8pIHtcbiAgICAgIGhhc0ZsYXNoID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAobmF2aWdhdG9yLm1pbWVUeXBlc1xuICAgICAgJiYgbmF2aWdhdG9yLm1pbWVUeXBlc1snYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnXSAhPT0gdW5kZWZpbmVkXG4gICAgICAmJiBuYXZpZ2F0b3IubWltZVR5cGVzWydhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCddLmVuYWJsZWRQbHVnaW4pIHtcbiAgICAgIGhhc0ZsYXNoID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZihoYXNGbGFzaCkge1xuICAgICQoJy52aWRlby1mbGFzaC5wcmltYXJ5JykuYWRkQ2xhc3MoJ3BsYXktaXQnKTtcbiAgfSBlbHNlIHtcbiAgICAkKCcudmlkZW8uZmFsbGJhY2ssIC52aWRlby1jYXB0aW9uLmZhbGxiYWNrJykuYWRkQ2xhc3MoJ3BsYXktaXQnKTtcbiAgfVxuXG59KTtcblxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8taW52YWxpZC10aGlzLCBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogTU9EQUwgV0lORE9XU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiBBZGQgbG9hZCgpIG1ldGhvZCB0byBCb290c3RyYXAgbW9kYWxzXG4gKlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcbiAgLy8gRm9yIHNvbWUgcmVhc29uLCB0aGUgYXJyb3cgZnVuY3Rpb24gZG9lcyBub3Qgd29yayBoZXJlXG4gICQoJy5qcy1vcGVuLW1vZGFsJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBsZXQgaHJlZiAgICAgICAgID0gJyc7XG4gICAgY29uc3QgJG1vZGFsICAgICA9ICQoJyNtb2RhbCcpO1xuICAgIGNvbnN0ICRjb250YWluZXIgPSAkKCcubW9kYWwtY29udGVudCcpO1xuXG4gICAgLy8gQ2FuY2VsIHRoZSBsaW5rIGJlaGF2aW9yXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaWYgKCQodGhpcykuaXMoJ2EnKSkge1xuICAgICAgaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBocmVmID0gJCh0aGlzKS5hdHRyKCdkYXRhLWhyZWYnKTtcbiAgICB9XG5cbiAgICAvLyAkY29udGFpbmVyLmxvYWQoYCR7aHJlZn0gLmpzLW1vZGFsLWNvbnRlbnRgKTtcblxuICAgICRjb250YWluZXIubG9hZChgJHtocmVmfSAuanMtbW9kYWwtY29udGVudGAsICgpID0+IHtcbiAgICAgICQoJy53ZWJmb3JtLWNvbXBvbmVudC0tZmllbGRzZXQtZnVuZHJhaXNpbmcnKS5oaWRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyAkY29udGFpbmVyLmxvYWQoYCR7aHJlZn0gLmpzLW1vZGFsLWNvbnRlbnRgLCAoKSA9PiB7XG4gICAgLy8gICBtb2RhbC5tb2RhbCgnc2hvdycpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gQ2xlYXIgbW9kYWwgY29udGVudCB0byBwcmV2ZW50IHNob3cgaXQgYmVmb3JlIG5ldyBkb2N1bWVudCBoYXMgYmVlbiBsb2FkZWRcbiAgICAkbW9kYWwub24oJ2hpZGRlbi5icy5tb2RhbCcsICgpID0+IHtcbiAgICAgICRjb250YWluZXIuZW1wdHkoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gSGlkZSBtb2RhbCBvbiBFc2NcbiAgJChkb2N1bWVudCkua2V5ZG93bigoZSkgPT4ge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7XG4gICAgICAkKCcubW9kYWwnKS5oaWRlO1xuICAgICAgLy8gJCgnLm1vZGFsJykucmVtb3ZlQ2xhc3MoJ2luJywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyAgICQodGhpcykuaGlkZSgpO1xuICAgICAgLy8gICAvLyAkKHRoaXMpLmhpZGUoNDAwKTtcbiAgICAgIC8vIH0pO1xuICAgIH1cbiAgfSk7XG5cbn0pO1xuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogU09DSUFMIFNIQVJJTkdcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogT3BlbiBzaGFyZSBwb3B1cFxuICogU3RpY2t5IGxpa2UnbidzaGFyZSBib3hcbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuXG4gICQoJy5qcy1zaGFyZScpLmNsaWNrKGZ1bmN0aW9uIHNoYXJpbmdXaW4gKCkge1xuXG4gICAgY29uc3QgZWwgICA9ICQodGhpcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgY29uc3QgaHJlZiA9IGVsLmRhdGEoJ2hyZWYnKTtcblxuICAgIGlmIChlbC5oYXNDbGFzcygnZW1haWwtbWQnKSB8fCBlbC5oYXNDbGFzcygnd2hhdHNhcHAnKSkge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cub3BlbihocmVmLCdzaGFyZVdpbicsICdtZW51YmFyPW5vLHRvb2xiYXI9bm8scmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxoZWlnaHQ9NjAwLHdpZHRoPTYwMCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTWFrZSBsaWtlJ24nc2hhcmUgYm94IHN0aWNreVxuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDU3NnB4KScpLm1hdGNoZXMpIHtcbiAgICAkKCcuc29jaWFsLW9wdGlvbnMuanMtc3RpY2t5Jykuc3RpY2t5KHt0b3BTcGFjaW5nOiAyN30pO1xuXG4gICAgLy8gSGlkZSBhbmQgc2hvdyBzdGlja3lcbiAgICAkKHdpbmRvdykuc2Nyb2xsKCgpID0+IHtcblxuICAgICAgY29uc3Qgc3RpY2t5ID0gJCgnLnNvY2lhbC1vcHRpb25zLmpzLXN0aWNreScpO1xuICAgICAgY29uc3QgYm90dG9tTmVpZ2hib3JzID0gJCgnLmNvbW1lbnRzLCAuY3RhLCAuZm9vdGVyLCAuYXJ0aWNsZS1yZWxhdGVkLCAub3V0LW9mLWJvdW5kcycpO1xuXG4gICAgICBpZiAoYm90dG9tTmVpZ2hib3JzLmlzKCc6aW4tdmlld3BvcnQnKSkge1xuICAgICAgICBzdGlja3kuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RpY2t5LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cblxuICAgIH0pOyAvLyAvIGVuZDogaGlkZSBhbmQgc2hvdyBzdGlja3lcbiAgfSAvLyBlbmQ6IHdpbmRvdy5tYXRjaE1lZGlhXG5cbn0pO1xuXG5cblxuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogU0VBUkNIXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIFNldCBwbGFjZWhvbGRlciB0ZXh0XG4gKi9cbmNvbnN0IHNldFNlYXJjaFBsYWNlaG9sZGVyID0gKCkgPT4ge1xuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnc2MtaS1pZDEnKTtcbiAgY29uc3QgbGFuZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF0uZ2V0QXR0cmlidXRlKCdsYW5nJyk7XG5cbiAgaWYgKGlucHV0KSB7XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA1NzVweCknKS5tYXRjaGVzKSB7XG4gICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IChsYW5nID09PSAncnUnKSA/ICfQn9C+0LjRgdC6JyA6ICdTaXRlIHNlYXJjaCc7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNTc2cHgpIGFuZCAobWF4LXdpZHRoOiA5OTFweCknKS5tYXRjaGVzKSB7XG4gICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IChsYW5nID09PSAncnUnKSA/ICfQn9C+0LjRgdC6OiBQUiwgZXZlbnQt0LzQtdC90LXQtNC20LzQtdC90YInIDogJ1NlYXJjaCBQUiBhbmQgZXZlbnQgbWFuYWdlbWVudCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gKGxhbmcgPT09ICdydScpID8gJ9Cf0L7QuNGB0Lo6IFBSLCDQvtGA0LPQsNC90LjQt9Cw0YbQuNGPINC80LXRgNC+0L/RgNC40Y/RgtC40LksIElULdGA0LXRiNC10L3QuNGPJyA6ICdTZWFyY2ggUFIsIGV2ZW50IG1hbmFnZW1lbnQgYW5kIElUIHNvbHV0aW9ucyc7XG4gICAgfVxuICB9XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgc2V0U2VhcmNoUGxhY2Vob2xkZXIoKTtcblxuICBjb25zdCBzZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdzYy1jb250cm9sLXdyYXBwZXItY3NlID4gLmdzYy1zZWFyY2gtYm94Jyk7XG4gIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdzaWJfYSA+IC5nc2MtaW5wdXQnKTtcbiAgY29uc3Qgc2VhcmNoQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fc2VhcmNoLWNhbmNlbCcpO1xuXG4gIC8vIFNob3cgZm9ybVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5oZWFkZXJfX3NlYXJjaC10b2dnbGVyJykpIHtcbiAgICAgIHNlYXJjaEZvcm0uY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuICAgICAgc2VhcmNoQ2FuY2VsLmNsYXNzTGlzdC5hZGQoJ2lzLXZpc2libGUnKTtcbiAgICAgIHNlYXJjaElucHV0LmZvY3VzKCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG5cbiAgLy8gSGlkZSBmb3JtXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcygnLmhlYWRlcl9fc2VhcmNoLWNhbmNlbCcpKSB7XG4gICAgICBzZWFyY2hGb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZpc2libGUnKTtcbiAgICAgIHNlYXJjaENhbmNlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy12aXNpYmxlJyk7XG4gICAgLy8gc2VhcmNoSW5wdXQuYmx1cigpO1xuICAgIH1cbiAgfSwgZmFsc2UpO1xufSwgZmFsc2UpO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICBzZXRTZWFyY2hQbGFjZWhvbGRlcigpO1xufSwgZmFsc2UpO1xuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQ0FST1VTRUxcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogUHJldmVudGluZyBjYXJvdXNlbCBmcm9tIGF1dG8gc2xpZGluZy5cbiAqIExpbmtzIHRvIHNwZWNpZmljIHNsaWRlIGZyb20gaW5uZXIgcGFnZXMuXG4gKiBTd2lwaW5nIHRvIGdvIGJhY2sgYW5kIGZvcnRoIGJldHdlZW4gdGhlIHNsaWRlcy5cbiAqIENoYW5nZSBib2R5IGJhY2tncm91bmQgY29sb3IgdG8geWVsbG93IGFuZCB2aWNlIHZlcnNhLlxuICogU2V0IHNsaWRlIGNvdW50ZXIgaW4gZm9vdGVyLlxuICpcbiAqL1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcblxuICB2YXIgY2Fyb3VzZWwgICAgID0gJCgnLmNhcm91c2VsJyk7XG5cbiAgLy8gUHJldmVudGluZyBCb290c3RyYXAgY2Fyb3VzZWwgZnJvbSBhdXRvIHNsaWRpbmdcblxuICAkKCcuY2Fyb3VzZWwuanMtbWFudWFsJykuY2Fyb3VzZWwoe1xuICAgIGludGVydmFsOiAwXG4gIH0pO1xuXG4gLy8gQXV0b21hdGljYWxseSBjeWNsaW5nIGNhcm91c2VsXG4gICQoJy5jYXJvdXNlbC5qcy1hdXRvJykuY2Fyb3VzZWwoe1xuICAgIGludGVydmFsOiAxMjAwMFxuICB9KTtcblxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgVG91Y2ggZXZlbnRzXG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmV2XG4gICAqXG4gICAqIEZvciBzd2lwZSB0b3VjaCBldmVudCBoZWFkIGpRdWVyeSBNb2JpbGUsIGNyZWF0ZSBhIGN1c3RvbSBidWlsZCB3aXRoXG4gICAqIGp1c3QgVG91Y2ggYW5kIGFkZCBpdCB0byBwcm9qZWN0LlxuICAgKiBqcXVlcnltb2JpbGUuY29tL2Rvd25sb2FkLWJ1aWxkZXIvID0+IC9zcmMvanMvanF1ZXJ5Lm1vYmlsZS5jdXN0b20uanNcbiAgICovXG5cbiAgY2Fyb3VzZWwuc3dpcGVyaWdodChmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmNhcm91c2VsKCdwcmV2Jyk7XG4gIH0pO1xuXG4gIC8vIE5leHRcblxuICBjYXJvdXNlbC5zd2lwZWxlZnQoZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5jYXJvdXNlbCgnbmV4dCcpO1xuICB9KTtcblxufSk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBSRVNQT05TSVZFIEZVTkNUSU9OU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4oKCQpID0+IHtcbiAgLyoqXG4gICAqIERpc2FibGUgRHJvcGRvd25zIG9uIE1vYmlsZXMgYW5kIENoYW5nZSBEcm9wZG93bnMgVHJpZ2dlcnMgb24gTGFwdG9wc1xuICAgKi9cbiAgZnVuY3Rpb24gY29udHJvbERyb3Bkb3ducygpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDc2N3B4KScpLm1hdGNoZXMpIHtcbiAgICAgICQoJy5qcy1tZW51LWxpbmssIC5uYXZiYXItZHJvcGRvd24tdG9nZ2xlLXNwbGl0JykuYXR0cignZGF0YS10b2dnbGUnLCAnJyk7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNzY4cHgpIGFuZCAobWF4LXdpZHRoOiAxMTk5cHgpJykubWF0Y2hlcykge1xuICAgICAgLyoqXG4gICAgICAgKiBUdXJuIG9mZiBkcm9wZG93biB0cmlnZ2VyIGJlaGF2aW9yIG9uIHNwbGl0IGJ1dHRvbiBsaW5rIGFuZCB0dXJuIG9uIGl0XG4gICAgICAgKiBvbiBsaW5rXG4gICAgICAgKi9cbiAgICAgICQoJy5qcy1tZW51LWxpbmsnKS5hdHRyKCdkYXRhLXRvZ2dsZScsICdkcm9wZG93bicpO1xuICAgICAgJCgnLm5hdmJhci1kcm9wZG93bi10b2dnbGUtc3BsaXQnKS5hdHRyKCdkYXRhLXRvZ2dsZScsICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLyoqXG4gICAgICAgKiBUdXJuIG9mZiBkcm9wZG93biB0cmlnZ2VyIGJlaGF2aW9yIG9uIGxpbmsgYW5kIHR1cm4gb24gaXQgb24gc3BsaXRcbiAgICAgICAqIGJ1dHRvblxuICAgICAgICovXG4gICAgICAkKCcuanMtbWVudS1saW5rJykuYXR0cignZGF0YS10b2dnbGUnLCAnJyk7XG4gICAgICAkKCcubmF2YmFyLWRyb3Bkb3duLXRvZ2dsZS1zcGxpdCcpLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJ2Ryb3Bkb3duJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgZHJvcGRvd24gYWZ0ZXIgbW91c2UgbGVhdmVkIG5hdmJhciBhcmVhXG4gICAqL1xuICAvLyAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24nKS5tb3VzZWVudGVyKChlKSA9PiB7XG4gIC8vICAgY29uc3QgZWwgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIC8vICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgLy8gICAgICAgaWYgKCFlbC5oYXNDbGFzcygnc2hvdycpKSB7XG4gIC8vICAgICAgICAgJCgnLm5hdmJhci1pdGVtLmRyb3Bkb3duLnNob3cnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAvLyAgICAgICB9XG4gIC8vICAgICB9LCAyMDAwKTtcbiAgLy8gfSk7XG5cbiAgLy8gJCgnLm5hdmJhci1pdGVtLmRyb3Bkb3duJykubW91c2VsZWF2ZSgoZSkgPT4ge1xuICAvLyAgIGNvbnN0IGVsID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAvLyAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gIC8vICAgICAgIGlmIChlbC5oYXNDbGFzcygnc2hvdycpKSB7XG4gIC8vICAgICAgICAgJCgnLm5hdmJhci1pdGVtLmRyb3Bkb3duLnNob3cnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAvLyAgICAgICB9XG4gIC8vICAgICB9LCAxNTAwKTtcbiAgLy8gfSk7XG5cbiAgJCgnLm5hdmJhcicpLm1vdXNlbGVhdmUoKCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJCgnLm5hdmJhci1pdGVtLmRyb3Bkb3duLnNob3cgLm5hdmJhci1kcm9wZG93bi10b2dnbGUtc3BsaXQnKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgfSwgMTUwMCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDaGFuZ2UgQ1RBIExhYmVsXG4gICAqL1xuICBmdW5jdGlvbiBjaGFuZ2VDVEFsYWJlbCgpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDEyMDBweCknKS5tYXRjaGVzKSB7XG4gICAgICAkKCcubmF2YmFyLWJ0bi1wcmltYXJ5JykudGV4dCgn0J7QsdGA0LDRgtC90LDRjyDRgdCy0Y/Qt9GMJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5uYXZiYXItYnRuLXByaW1hcnknKS50ZXh0KCfQn9C40YjQuNGC0LUnKTtcbiAgICB9XG4gIH1cblxuICAvLyBFeGVjdXRlIG9uIGRvY3VtZW50IHJlYWR5XG4gICQoKCkgPT4ge1xuICAgIGNvbnRyb2xEcm9wZG93bnMoKTtcbiAgICBjaGFuZ2VDVEFsYWJlbCgpO1xuICB9KTtcblxuICAvLyBFeGVjdXRlIG9uIHdpbmRvdyByZXNpemVcbiAgJCh3aW5kb3cpLnJlc2l6ZSgoKSA9PiB7XG4gICAgY29udHJvbERyb3Bkb3ducygpO1xuICAgIGNoYW5nZUNUQWxhYmVsKCk7XG4gIH0pO1xufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIExJTktTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIEFudGkgc3BhbSBwcm90ZWN0aW9uIGZvciBlbWFpbCBhZGRyZXNzZXNcbiAqXG4gKi9cblxuKCgpID0+IHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNvbnRhY3QnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGNvbnN0IGVtYWlsID0gZWw7XG4gICAgZW1haWwuaHJlZiA9IGVsLmhyZWZcbiAgICAgIC5yZXBsYWNlKCcoYXQpZ21haWwnLCAnQHBvbHlsb2cnKVxuICAgICAgLnJlcGxhY2UoJyhkb3QpY29tJywgJy5ydScpO1xuICB9KTtcbn0pKCk7XG4iXX0=

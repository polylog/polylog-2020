"use strict";jQuery(document).ready(function(e){e(".btn.is-bottom-cta").hover(function(){e(".footer").toggleClass("js-cta-hovered")})}),jQuery(document).ready(function(i){var e=i(".subscription .form-submit, .webform-client-form-3601 .form-submit"),a=i(".subscription .form-disclaimer, .webform-client-form-3601 .form-disclaimer");function t(){var e=i("#form-services"),a=i(".form__fieldset.is-fundraising"),t=i(".form__fieldset.is-fundraising .is-optional-required");"Фандрайзинг"===e.val()&&a.is(":hidden")?(t.prop("required",!0),a.slideDown(1e3)):"Фандрайзинг"!==e.val()&&a.is(":visible")&&(t.removeProp("required"),a.slideUp(1e3))}i(".row.filter, #views-exposed-form-projects-page, #views-exposed-form-projects-en-page").prev(".page-header").css("border-radius","3px"),i(".section-blog.page-thanks .subscription input, .section-blog.page-thanks .subscription button").prop("disabled",!0),i(".form-select").change(function(){i(this).closest("form").find(".form-type-button").removeClass("disabled")}),window.matchMedia("(min-width: 992px)").matches&&(e.mouseover(function(){a.addClass("open")}),i(document).on("click",function(){a.removeClass("open")}),i(document).keydown(function(e){27===e.keyCode&&a.removeClass("open")})),i(".form__fieldset.is-fundraising").hide(),i(".modal-content").on("change","#form-services",t),i("#form-services").on("change",t)}),jQuery(document).ready(function(e){e(".list-view-item br").replaceWith(" ")}),jQuery(document).ready(function(t){t(".article > img:not([class]), .article-body > img:not([class]), .article-body > .image.image-_original").wrap('<div class="media-wrapper"></div>'),t(".sec-gallery > img:not([class]), figure.gallery > img:not([class]), #gallery > img:not([class])").wrap('<div class="media-wrapper"></div>'),t("img").error(function(){var e=t(this),a=e.parent("div");e.hide(),a.hide(),a.next(".gallery").hide()}),t(".js-mfp").magnificPopup({type:"image",tLoading:"",removalDelay:300,mainClass:"mfp-fade",fixedContentPos:!0}),t(".js-mfp-video").magnificPopup({type:"iframe",tLoading:"",mainClass:"mfp-fade",iframe:{patterns:{youtube:{src:"https://www.youtube.com/embed/%id%?rel=0&modestbranding=1&autohide=1&showinfo=0&autoplay=1"}}}});var a=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(e){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}a?t(".video-flash.primary").addClass("play-it"):t(".video.fallback, .video-caption.fallback").addClass("play-it")}),jQuery(document).ready(function(n){n(".js-open-modal").on("click",function(e){var a="",t=n("#modal"),i=n(".modal-content");e.preventDefault(),a=n(this).is("a")?n(this).attr("href"):n(this).attr("data-href"),i.load("".concat(a," .js-modal-content"),function(){n(".form__fieldset.is-fundraising").hide()}),t.on("hidden.bs.modal",function(){i.empty()})}),n(document).keydown(function(e){27===e.keyCode&&n(".modal").hide})}),jQuery(document).ready(function(t){t(".js-share").click(function(){var e=t(this),a=e.data("href");e.hasClass("email-md")||e.hasClass("whatsapp")?window.location.href=a:window.open(a,"shareWin","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}),window.matchMedia("(min-width: 576px)").matches&&(t(".social-options.js-sticky").sticky({topSpacing:27}),t(window).scroll(function(){var e=t(".social-options.js-sticky");t(".comments, article-footer.meta, .main__comments, .cta, .footer, .article-related, .out-of-bounds").is(":in-viewport")?e.addClass("hidden"):e.removeClass("hidden")}))}),jQuery(document).ready(function(e){e(".js-contact").each(function(){this.href=this.href.replace("(at)gmail","@polylog").replace("(dot)com",".ru")})}),$(document).ready(function(){function e(){if($(window).width()<767&&!a)return a=!0,$(".table-responsive").each(function(e,a){!function(e){e.wrap("<div class='table-wrapper' />");var a=e.clone();a.find("td:not(:first-child), th:not(:first-child)").css("display","none"),a.removeClass("responsive"),e.closest(".table-wrapper").append(a),a.wrap("<div class='pinned' />"),e.wrap("<div class='scrollable' />"),function(e,a){var t=e.find("tr"),i=a.find("tr"),n=[];t.each(function(a){$(this).find("th, td").each(function(){var e=$(this).outerHeight(!0);n[a]=n[a]||0,e>n[a]&&(n[a]=e)})}),i.each(function(e){$(this).height(n[e])})}(e,a)}($(a))}),!0;a&&767<$(window).width()&&(a=!1,$(".table-responsive").each(function(e,a){var t;(t=$(a)).closest(".table-wrapper").find(".pinned").remove(),t.unwrap(),t.unwrap()}))}var a=!1;$(window).load(e),$(window).on("redraw",function(){a=!1,e()}),$(window).on("resize",e)});var setSearchPlaceholder=function(){var e=document.getElementById("gsc-i-id1"),a=document.getElementsByTagName("html")[0].getAttribute("lang");window.matchMedia("(max-width: 575px)").matches?e.placeholder="ru"===a?"Поиск":"Site search":window.matchMedia("(min-width: 576px) and (max-width: 991px)").matches?e.placeholder="ru"===a?"Поиск: PR, event-менеджмент":"Search PR and event management":e.placeholder="ru"===a?"Поиск: PR, организация мероприятий, IT-решения":"Search PR, event management and IT solutions"};window.addEventListener("load",function(){setSearchPlaceholder();var a=document.querySelector(".gsc-control-wrapper-cse > .gsc-search-box"),t=document.querySelector(".gsib_a > .gsc-input"),i=document.querySelector(".header__search-cancel");document.addEventListener("click",function(e){e.target.closest(".header__search-toggler")&&(a.classList.add("is-visible"),i.classList.add("is-visible"),t.focus())},!1),document.addEventListener("click",function(e){e.target.matches(".header__search-cancel")&&(a.classList.remove("is-visible"),i.classList.remove("is-visible"))},!1)},!1),window.addEventListener("resize",function(){setSearchPlaceholder()},!1),jQuery(document).ready(function(e){var a=e(".carousel");e(".carousel.js-manual").carousel({interval:0}),e(".carousel.js-auto").carousel({interval:12e3}),a.swiperight(function(){e(this).carousel("prev")}),a.swipeleft(function(){e(this).carousel("next")})}),jQuery(document).ready(function(o){o('a[data-role="gallery-tbn"], a[data-role="gallerycontrol"], a[data-widget="gallery"], a[rel*="gallery"]').click(function(e){var a,t=o(this).attr("href"),i=o(this).closest("figure.gallery, .sec-gallery").children(".media-wrapper"),n=o(i.children("p"));e.preventDefault(),a=o(this).attr("title")&&o(n)[0]?o(this).attr("title"):"",o(i.children("img")).remove(),n.empty(),i.prepend('<img src="'+t+'" alt="'+a+'">'),n.append(a)}),o("a.loadinto-gallery").click(function(e){e.preventDefault();var a=o(this).attr("href");o("#gallery").load(a)})}),function(e){function a(){window.matchMedia("(max-width: 767px)").matches?e(".js-menu-link, .navbar-dropdown-toggle-split").attr("data-toggle",""):window.matchMedia("(min-width: 768px) and (max-width: 1199px)").matches?(e(".js-menu-link").attr("data-toggle","dropdown"),e(".navbar-dropdown-toggle-split").attr("data-toggle","")):(e(".js-menu-link").attr("data-toggle",""),e(".navbar-dropdown-toggle-split").attr("data-toggle","dropdown"))}function t(){window.matchMedia("(min-width: 1200px)").matches?e(".navbar-btn-primary").text("Обратная связь"):e(".navbar-btn-primary").text("Пишите")}e(".navbar").mouseleave(function(){setTimeout(function(){e(".navbar-item.dropdown.show .navbar-dropdown-toggle-split").attr("aria-expanded","false"),e(".navbar-item.dropdown.show").removeClass("show")},1500)}),e(function(){a(),t()}),e(window).resize(function(){a(),t()})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZm9vdGVyL2Zvb3Rlci5qcyIsImNvbXBvbmVudHMvZm9ybS9mb3JtLmpzIiwiY29tcG9uZW50cy9saXN0LXZpZXcvbGlzdC12aWV3LmpzIiwiY29tcG9uZW50cy9tZWRpYS9tZWRpYS5qcyIsImNvbXBvbmVudHMvbW9kYWwvbW9kYWwuanMiLCJjb21wb25lbnRzL3NvY2lhbC10b29scy9zb2NpYWwtdG9vbHMuanMiLCJiYXNlL2NvbnRlbnQvbGluay9saW5rLmpzIiwiYmFzZS9jb250ZW50L3RhYmxlL3RhYmxlLXJlc3BvbnNpdmUuanMiLCJjb21wb25lbnRzL2Zvcm0vc2VhcmNoL3NlYXJjaC5qcyIsImNvbXBvbmVudHMvbWVkaWEvY2Fyb3VzZWwvY2Fyb3VzZWwuanMiLCJjb21wb25lbnRzL21lZGlhL2dhbGxlcnkvbGVnYWN5LmpzIiwiY29tcG9uZW50cy9uYXYvbmF2YmFyL25hdmJhci5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsImhvdmVyIiwidG9nZ2xlQ2xhc3MiLCIkc3Vic2NyaXB0aW9uQnRuIiwiJGRpc2NsYWltZXJUb29scHRpcCIsImZ1bmRyYWlzaW5nRGV0YWlscyIsIiRzZXJ2aWNlcyIsIiRmaWVsZHNldEZ1bmRyYWlzaW5nIiwiJGZ1bmRyYWlzaW5nUmVxdWlyZWQiLCJ2YWwiLCJpcyIsInByb3AiLCJzbGlkZURvd24iLCJyZW1vdmVQcm9wIiwic2xpZGVVcCIsInByZXYiLCJjc3MiLCJjaGFuZ2UiLCJ0aGlzIiwiY2xvc2VzdCIsImZpbmQiLCJyZW1vdmVDbGFzcyIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwibW91c2VvdmVyIiwiYWRkQ2xhc3MiLCJvbiIsImtleWRvd24iLCJlIiwia2V5Q29kZSIsImhpZGUiLCJyZXBsYWNlV2l0aCIsIndyYXAiLCJlcnJvciIsImVsIiwid3JhcHBlciIsInBhcmVudCIsIm5leHQiLCJtYWduaWZpY1BvcHVwIiwidHlwZSIsInRMb2FkaW5nIiwicmVtb3ZhbERlbGF5IiwibWFpbkNsYXNzIiwiZml4ZWRDb250ZW50UG9zIiwiaWZyYW1lIiwicGF0dGVybnMiLCJ5b3V0dWJlIiwic3JjIiwiaGFzRmxhc2giLCJBY3RpdmVYT2JqZWN0IiwibmF2aWdhdG9yIiwibWltZVR5cGVzIiwidW5kZWZpbmVkIiwiZW5hYmxlZFBsdWdpbiIsImhyZWYiLCIkbW9kYWwiLCIkY29udGFpbmVyIiwicHJldmVudERlZmF1bHQiLCJhdHRyIiwibG9hZCIsImNvbmNhdCIsImVtcHR5IiwiY2xpY2siLCJkYXRhIiwiaGFzQ2xhc3MiLCJsb2NhdGlvbiIsIm9wZW4iLCJzdGlja3kiLCJ0b3BTcGFjaW5nIiwic2Nyb2xsIiwiZWFjaCIsInJlcGxhY2UiLCJ1cGRhdGVUYWJsZXMiLCJ3aWR0aCIsInN3aXRjaGVkIiwiaSIsImVsZW1lbnQiLCJvcmlnaW5hbCIsImNvcHkiLCJjbG9uZSIsImFwcGVuZCIsInRyIiwidHJfY29weSIsImhlaWdodHMiLCJpbmRleCIsImhlaWdodCIsIm91dGVySGVpZ2h0Iiwic2V0Q2VsbEhlaWdodHMiLCJzcGxpdFRhYmxlIiwicmVtb3ZlIiwidW53cmFwIiwic2V0U2VhcmNoUGxhY2Vob2xkZXIiLCJpbnB1dCIsImdldEVsZW1lbnRCeUlkIiwibGFuZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0QXR0cmlidXRlIiwicGxhY2Vob2xkZXIiLCJhZGRFdmVudExpc3RlbmVyIiwic2VhcmNoRm9ybSIsInF1ZXJ5U2VsZWN0b3IiLCJzZWFyY2hJbnB1dCIsInNlYXJjaENhbmNlbCIsInRhcmdldCIsImNsYXNzTGlzdCIsImFkZCIsImZvY3VzIiwiY2Fyb3VzZWwiLCJpbnRlcnZhbCIsInN3aXBlcmlnaHQiLCJzd2lwZWxlZnQiLCJ0aXRsZSIsImZpZ3VyZSIsImNoaWxkcmVuIiwiZmlnY2FwdGlvbiIsInByZXBlbmQiLCJjb250cm9sRHJvcGRvd25zIiwiY2hhbmdlQ1RBbGFiZWwiLCJ0ZXh0IiwibW91c2VsZWF2ZSIs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LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEZvb3RlclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFJvdGF0ZSBmb290ZXIgcmluZyBvbiBDVEEgaG92ZXIgb24gdGhlIENoaW5lc2UgYW5kIEphcGFiZXNlIGxhbmRpbmdzLlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcbiAgJCgnLmJ0bi5pcy1ib3R0b20tY3RhJykuaG92ZXIoKCkgPT4ge1xuICAgICQoJy5mb290ZXInKS50b2dnbGVDbGFzcygnanMtY3RhLWhvdmVyZWQnKTtcbiAgfSk7XG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEZPUk1cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuICBjb25zdCAkc3Vic2NyaXB0aW9uQnRuID0gJCgnLnN1YnNjcmlwdGlvbiAuZm9ybS1zdWJtaXQsIC53ZWJmb3JtLWNsaWVudC1mb3JtLTM2MDEgLmZvcm0tc3VibWl0Jyk7XG4gIGNvbnN0ICRkaXNjbGFpbWVyVG9vbHB0aXAgPSAkKCcuc3Vic2NyaXB0aW9uIC5mb3JtLWRpc2NsYWltZXIsIC53ZWJmb3JtLWNsaWVudC1mb3JtLTM2MDEgLmZvcm0tZGlzY2xhaW1lcicpO1xuXG4gIC8qKlxuICAgKiBSb3VuZCBjb3JuZXJzIG9mIHBhZ2UgaGVhZGVyIG9mIDJuZCBhbmQgdGhlIG5leHQgcndzdWx0IHBhZ2VzIGFuZCBsYXllZFxuICAgKiBvdXQgYWJvdmUgdGhlIHByb2plY3RzIGZpbHRlclxuICAgKi9cbiAgJCgnLnJvdy5maWx0ZXIsICN2aWV3cy1leHBvc2VkLWZvcm0tcHJvamVjdHMtcGFnZSwgI3ZpZXdzLWV4cG9zZWQtZm9ybS1wcm9qZWN0cy1lbi1wYWdlJykucHJldignLnBhZ2UtaGVhZGVyJykuY3NzKCdib3JkZXItcmFkaXVzJywgJzNweCcpO1xuXG4gIC8vIERpc2FibGUgc3Vic2NyaXB0aW9uIGZvcm0gb24gaXQgdGhhbmsgeW91IHBhZ2UuXG4gICQoJy5zZWN0aW9uLWJsb2cucGFnZS10aGFua3MgLnN1YnNjcmlwdGlvbiBpbnB1dCwgLnNlY3Rpb24tYmxvZy5wYWdlLXRoYW5rcyAuc3Vic2NyaXB0aW9uIGJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgLy8gVG9nbGUgZmlsdGVyIGJ1dHRvblxuICAkKCcuZm9ybS1zZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24gZW5hYmxlRmlsdGVyQnV0dG9uKCkge1xuICAgICQodGhpcykuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5mb3JtLXR5cGUtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gIH0pO1xuXG4gIC8vIFNob3cgZGlzY2xhaW1lciB0b29scHRpcCBvbiBzdWJzY3JpcHRpb25cbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA5OTJweCknKS5tYXRjaGVzKSB7XG4gICAgJHN1YnNjcmlwdGlvbkJ0bi5tb3VzZW92ZXIoKCkgPT4ge1xuICAgICAgJGRpc2NsYWltZXJUb29scHRpcC5hZGRDbGFzcygnb3BlbicpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgJGRpc2NsYWltZXJUb29scHRpcC5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkua2V5ZG93bigoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgJGRpc2NsYWltZXJUb29scHRpcC5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPR0dMRSBGVU5EUkFJU0lORyBGSUVMRFNFVFxuICAgKi9cbiAgZnVuY3Rpb24gZnVuZHJhaXNpbmdEZXRhaWxzKCkge1xuICAgIGNvbnN0ICRzZXJ2aWNlcyA9ICQoJyNmb3JtLXNlcnZpY2VzJyk7XG4gICAgY29uc3QgJGZpZWxkc2V0RnVuZHJhaXNpbmcgPSAkKCcuZm9ybV9fZmllbGRzZXQuaXMtZnVuZHJhaXNpbmcnKTtcbiAgICBjb25zdCAkZnVuZHJhaXNpbmdSZXF1aXJlZCA9ICQoJy5mb3JtX19maWVsZHNldC5pcy1mdW5kcmFpc2luZyAuaXMtb3B0aW9uYWwtcmVxdWlyZWQnKTtcblxuICAgIGlmICgkc2VydmljZXMudmFsKCkgPT09ICfQpNCw0L3QtNGA0LDQudC30LjQvdCzJyAmJiAkZmllbGRzZXRGdW5kcmFpc2luZy5pcygnOmhpZGRlbicpKSB7XG4gICAgICAkZnVuZHJhaXNpbmdSZXF1aXJlZC5wcm9wKCdyZXF1aXJlZCcsIHRydWUpO1xuICAgICAgJGZpZWxkc2V0RnVuZHJhaXNpbmcuc2xpZGVEb3duKDEwMDApO1xuICAgIH0gZWxzZSBpZiAoJHNlcnZpY2VzLnZhbCgpICE9PSAn0KTQsNC90LTRgNCw0LnQt9C40L3QsycgJiYgJGZpZWxkc2V0RnVuZHJhaXNpbmcuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICRmdW5kcmFpc2luZ1JlcXVpcmVkLnJlbW92ZVByb3AoJ3JlcXVpcmVkJyk7XG4gICAgICAkZmllbGRzZXRGdW5kcmFpc2luZy5zbGlkZVVwKDEwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhpZGUgZmllbGRzZXQgb24gZnVsbCBwYWdlXG4gICQoJy5mb3JtX19maWVsZHNldC5pcy1mdW5kcmFpc2luZycpLmhpZGUoKTtcblxuICAvLyBUb2dnbGUgZmllbGRzZXQgaW4gbW9kYWxcbiAgJCgnLm1vZGFsLWNvbnRlbnQnKS5vbignY2hhbmdlJywgJyNmb3JtLXNlcnZpY2VzJywgZnVuZHJhaXNpbmdEZXRhaWxzKTtcblxuICAvLyBUb2dnbGUgZmllbGRzZXQgb24gZnVsbCBwYWdlXG4gICQoJyNmb3JtLXNlcnZpY2VzJykub24oJ2NoYW5nZScsIGZ1bmRyYWlzaW5nRGV0YWlscyk7XG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIExJU1QgVklFV1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiBSZW1vdmUgYnJlYWtzIGluIHRpdGxlIGxpc3RcbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7XG4gICQoJy5saXN0LXZpZXctaXRlbSBicicpLnJlcGxhY2VXaXRoKCcgJyk7XG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIE1FRElBXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcblxuICAvLyBXcmFwIGltYWdlIHRvIG1ha2Ugcm91bmRlZCBjb2xvcnMgYW5kIHNlbWl0cmFuc3BhcmVudCBpbm5lciBib3JkZXJcbiAgJCgnLmFydGljbGUgPiBpbWc6bm90KFtjbGFzc10pLCAuYXJ0aWNsZS1ib2R5ID4gaW1nOm5vdChbY2xhc3NdKSwgLmFydGljbGUtYm9keSA+IC5pbWFnZS5pbWFnZS1fb3JpZ2luYWwnKS53cmFwKCc8ZGl2IGNsYXNzPVwibWVkaWEtd3JhcHBlclwiPjwvZGl2PicpO1xuICAkKCcuc2VjLWdhbGxlcnkgPiBpbWc6bm90KFtjbGFzc10pLCBmaWd1cmUuZ2FsbGVyeSA+IGltZzpub3QoW2NsYXNzXSksICNnYWxsZXJ5ID4gaW1nOm5vdChbY2xhc3NdKScpLndyYXAoJzxkaXYgY2xhc3M9XCJtZWRpYS13cmFwcGVyXCI+PC9kaXY+Jyk7XG5cbiAgLy8gSGlkZSBicm9rZW4gaW1hZ2VzXG4gICQoJ2ltZycpLmVycm9yKGZ1bmN0aW9uIGhpZGVCcm9rZW5JbWcgKCkge1xuICAgIGNvbnN0IGVsID0gJCh0aGlzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICBjb25zdCB3cmFwcGVyID0gZWwucGFyZW50KCdkaXYnKTtcbiAgICBlbC5oaWRlKCk7XG4gICAgd3JhcHBlci5oaWRlKCk7XG4gICAgd3JhcHBlci5uZXh0KCcuZ2FsbGVyeScpLmhpZGUoKTtcbiAgfSk7XG5cbiAgLy8gMSkgVmlkZW8uIFJlcXVpcmVkIFVSTCBmb3JtYXQgaXNcbiAgLy8gaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9QekJrNC1hd1k0MFxuICAvLyB3ZSBjb3VsZCBhbHNvIGFkZCBzb21lIHBhcmFtZXRlcmVzXG4gIC8vID9yZWw9MCZtb2Rlc3RicmFuZGluZz0xJmF1dG9oaWRlPTEmc2hvd2luZm89MCZhdXRvcGxheT0xXG4gIC8vIEF2YWlsYWJsZSBvcHRpb25zIDpcbiAgLy8gcGFkZGluZyBTcGFjZSBpbnNpZGUgZmFuY3lCb3ggYXJvdW5kIGNvbnRlbnRcbiAgLy8gbWFyZ2luIE1pbmltdW0gc3BhY2UgYmV0d2VlbiB2aWV3cG9ydCBhbmQgZmFuY3lCb3hcbiAgLy8gd2lkdGgsIGhlaWdodCwgbWluV2lkdGgsIG1pbkhlaWdodFxuICAvLyBhdXRvU2l6ZSBJZiBmYWxzZSwgdGhlIGJveCB3aWxsIG5vdCBiZSByZXNpemVkIHRvIGZpdCBjb250ZW50XG4gIC8vIGF1dG9SZXNpemUgSWYgZmFsc2UsIHRoZSBjb250ZW50IHdpbGwgbm90IGJlIHJlc2l6ZWQgYWZ0ZXIgd2luZG93IHJlc2l6ZVxuICAvLyBjbG9zZUJ0blxuICAvLyBldGM6IGh0dHA6Ly9mYW5jeWFwcHMuY29tL2ZhbmN5Ym94L1xuICAvLyAyKSBJbWFnZVxuICAvLyAzKSBJbWFnZXMgd29uJ3QgYmUgc2NhbGVkIHRvIGZpdCB0byBicm93c2VyJ3MgaGVpZ2h0XG4gIC8vIDQpIEltYWdlcyB3b24ndCBleGNlZWQgdGhlIGJyb3dzZXIncyB3aWR0aFxuXG4gIC8vICQoJy5qcy1mYW5jeWJveC12aWRlbycpLmZhbmN5Ym94KHsgLy8gMVxuXG4gIC8vICAgY2xvc2VFZmZlY3Q6ICdub25lJyxcbiAgLy8gICAvLyBvcGVuRWZmZWN0OiAnZWxhc3RpYycsXG4gIC8vICAgcGFkZGluZzogMTIsXG4gIC8vICAgdG9wUmF0aW86IC4zLFxuICAvLyAgIG1heFdpZHRoOiA4MDAsXG4gIC8vICAgbWF4SGVpZ2h0OiA0NThcblxuICAvLyB9KTtcblxuICAvLyAkKCcuanMtZmFuY3lib3gnKS5mYW5jeWJveCh7IC8vIDJcbiAgLy8gICBjbG9zZUVmZmVjdDogJ25vbmUnLFxuICAvLyAgIGZpdFRvVmlldzogZmFsc2UsIC8vIDNcbiAgLy8gICBtYXhXaWR0aDogJzk4JScsIC8vIDRcbiAgLy8gICBwYWRkaW5nOiAxMixcbiAgLy8gICB0aXRsZVNob3c6IGZhbHNlXG4gIC8vIH0pO1xuXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgIE1hZ25pZmljIFBvcHVwIEltYWdlXG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLy8gMSkgUmVtb3ZlIHRleHQgZnJvbSBwcmVsb2FkZXJcbiAgLy8gMikgU3RyaW5nIHRoYXQgY29udGFpbnMgY2xhc3NlcyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIHJvb3QgZWxlbWVudCBvZlxuICAvLyBwb3B1cCB3cmFwcGVyIGFuZCB0byBkYXJrIG92ZXJsYXlcblxuICAkKCcuanMtbWZwJykubWFnbmlmaWNQb3B1cCh7XG4gICAgdHlwZTogJ2ltYWdlJyxcbiAgICB0TG9hZGluZzogJycsIC8vIDFcbiAgICByZW1vdmFsRGVsYXk6IDMwMCxcbiAgICBtYWluQ2xhc3M6ICdtZnAtZmFkZScsIC8vIDJcbiAgICBmaXhlZENvbnRlbnRQb3M6IHRydWVcbiAgfSk7XG5cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgTWFnbmlmaWMgUG9wdXAgVmlkZW9cbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvLyAxKSBSZW1vdmUgdGV4dCBmcm9tIHByZWxvYWRlclxuICAvLyAyKSBCeSBkZWZhdWx0IE1hZ25pZmljIFBvcHVwIHN1cHBvcnRzIG9ubHkgb25lIHR5cGUgb2YgVVJMIGZvciBlYWNoXG4gIC8vIHNlcnZpY2U6XG4gIC8vIFlvdVR1YmVcbiAgLy8gaHR0cDovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVdWNzVIMm9xU3ZJXG4gIC8vIFZpbWVvXG4gIC8vIGh0dHA6Ly92aW1lby5jb20vMTIzMTIzXG4gIC8vIEdvb2dsZSBNYXBzXG4gIC8vIGh0dHBzOi8vbWFwcy5nb29nbGUuY29tL21hcHM/cT0yMjFCK0Jha2VyK1N0cmVldCwrTG9uZG9uLCtVbml0ZWQrS2luZ2RvbSZobD1lbiZ0PXYmaG5lYXI9MjIxQitCYWtlcitTdCwrTG9uZG9uK05XMSs2WEUsK1VuaXRlZCtLaW5nZG9tXG4gIC8vIDMpIEJ1dCBpdCBjYW4gYmUgcmV3cml0ZWQgdy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG5cbiAgJCgnLmpzLW1mcC12aWRlbycpLm1hZ25pZmljUG9wdXAoe1xuICAgIHR5cGU6ICdpZnJhbWUnLFxuICAgIHRMb2FkaW5nOiAnJywgLy8gMVxuICAgIG1haW5DbGFzczogJ21mcC1mYWRlJyxcblxuICAgIGlmcmFtZToge1xuICAgICAgcGF0dGVybnM6IHtcbiAgICAgICAgeW91dHViZTogeyAvLyAyXG4gICAgICAgICAgc3JjOiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJWlkJT9yZWw9MCZtb2Rlc3RicmFuZGluZz0xJmF1dG9oaWRlPTEmc2hvd2luZm89MCZhdXRvcGxheT0xJyAvLyAzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBGbGFzaFxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGxldCBoYXNGbGFzaCA9IGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0IGZvID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCdTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaCcpO1xuICAgIGlmIChmbykge1xuICAgICAgaGFzRmxhc2ggPSB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChuYXZpZ2F0b3IubWltZVR5cGVzXG4gICAgICAmJiBuYXZpZ2F0b3IubWltZVR5cGVzWydhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCddICE9PSB1bmRlZmluZWRcbiAgICAgICYmIG5hdmlnYXRvci5taW1lVHlwZXNbJ2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ10uZW5hYmxlZFBsdWdpbikge1xuICAgICAgaGFzRmxhc2ggPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmKGhhc0ZsYXNoKSB7XG4gICAgJCgnLnZpZGVvLWZsYXNoLnByaW1hcnknKS5hZGRDbGFzcygncGxheS1pdCcpO1xuICB9IGVsc2Uge1xuICAgICQoJy52aWRlby5mYWxsYmFjaywgLnZpZGVvLWNhcHRpb24uZmFsbGJhY2snKS5hZGRDbGFzcygncGxheS1pdCcpO1xuICB9XG5cbn0pO1xuXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMsIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBNT0RBTCBXSU5ET1dTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIEFkZCBsb2FkKCkgbWV0aG9kIHRvIEJvb3RzdHJhcCBtb2RhbHNcbiAqXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuICAvLyBGb3Igc29tZSByZWFzb24sIHRoZSBhcnJvdyBmdW5jdGlvbiBkb2VzIG5vdCB3b3JrIGhlcmVcbiAgJCgnLmpzLW9wZW4tbW9kYWwnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGxldCBocmVmICAgICAgICAgPSAnJztcbiAgICBjb25zdCAkbW9kYWwgICAgID0gJCgnI21vZGFsJyk7XG4gICAgY29uc3QgJGNvbnRhaW5lciA9ICQoJy5tb2RhbC1jb250ZW50Jyk7XG5cbiAgICAvLyBDYW5jZWwgdGhlIGxpbmsgYmVoYXZpb3JcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoJCh0aGlzKS5pcygnYScpKSB7XG4gICAgICBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhyZWYgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaHJlZicpO1xuICAgIH1cblxuICAgIC8vICRjb250YWluZXIubG9hZChgJHtocmVmfSAuanMtbW9kYWwtY29udGVudGApO1xuXG4gICAgJGNvbnRhaW5lci5sb2FkKGAke2hyZWZ9IC5qcy1tb2RhbC1jb250ZW50YCwgKCkgPT4ge1xuICAgICAgJCgnLmZvcm1fX2ZpZWxkc2V0LmlzLWZ1bmRyYWlzaW5nJykuaGlkZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gJGNvbnRhaW5lci5sb2FkKGAke2hyZWZ9IC5qcy1tb2RhbC1jb250ZW50YCwgKCkgPT4ge1xuICAgIC8vICAgbW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIENsZWFyIG1vZGFsIGNvbnRlbnQgdG8gcHJldmVudCBzaG93IGl0IGJlZm9yZSBuZXcgZG9jdW1lbnQgaGFzIGJlZW4gbG9hZGVkXG4gICAgJG1vZGFsLm9uKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiB7XG4gICAgICAkY29udGFpbmVyLmVtcHR5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEhpZGUgbW9kYWwgb24gRXNjXG4gICQoZG9jdW1lbnQpLmtleWRvd24oKGUpID0+IHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgICAgJCgnLm1vZGFsJykuaGlkZTtcbiAgICAgIC8vICQoJy5tb2RhbCcpLnJlbW92ZUNsYXNzKCdpbicsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgIC8vICAgLy8gJCh0aGlzKS5oaWRlKDQwMCk7XG4gICAgICAvLyB9KTtcbiAgICB9XG4gIH0pO1xuXG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFNPQ0lBTCBTSEFSSU5HXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIE9wZW4gc2hhcmUgcG9wdXBcbiAqIFN0aWNreSBsaWtlJ24nc2hhcmUgYm94XG4gKlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcblxuICAkKCcuanMtc2hhcmUnKS5jbGljayhmdW5jdGlvbiBzaGFyaW5nV2luICgpIHtcblxuICAgIGNvbnN0IGVsICAgPSAkKHRoaXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgIGNvbnN0IGhyZWYgPSBlbC5kYXRhKCdocmVmJyk7XG5cbiAgICBpZiAoZWwuaGFzQ2xhc3MoJ2VtYWlsLW1kJykgfHwgZWwuaGFzQ2xhc3MoJ3doYXRzYXBwJykpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93Lm9wZW4oaHJlZiwnc2hhcmVXaW4nLCAnbWVudWJhcj1ubyx0b29sYmFyPW5vLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsaGVpZ2h0PTYwMCx3aWR0aD02MDAnKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIE1ha2UgbGlrZSduJ3NoYXJlIGJveCBzdGlja3lcbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA1NzZweCknKS5tYXRjaGVzKSB7XG4gICAgJCgnLnNvY2lhbC1vcHRpb25zLmpzLXN0aWNreScpLnN0aWNreSh7dG9wU3BhY2luZzogMjd9KTtcblxuICAgIC8vIEhpZGUgYW5kIHNob3cgc3RpY2t5XG4gICAgJCh3aW5kb3cpLnNjcm9sbCgoKSA9PiB7XG5cbiAgICAgIGNvbnN0IHN0aWNreSA9ICQoJy5zb2NpYWwtb3B0aW9ucy5qcy1zdGlja3knKTtcbiAgICAgIGNvbnN0IGJvdHRvbU5laWdoYm9ycyA9ICQoJy5jb21tZW50cywgYXJ0aWNsZS1mb290ZXIubWV0YSwgLm1haW5fX2NvbW1lbnRzLCAuY3RhLCAuZm9vdGVyLCAuYXJ0aWNsZS1yZWxhdGVkLCAub3V0LW9mLWJvdW5kcycpO1xuXG4gICAgICBpZiAoYm90dG9tTmVpZ2hib3JzLmlzKCc6aW4tdmlld3BvcnQnKSkge1xuICAgICAgICBzdGlja3kuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RpY2t5LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cblxuICAgIH0pOyAvLyAvIGVuZDogaGlkZSBhbmQgc2hvdyBzdGlja3lcbiAgfSAvLyBlbmQ6IHdpbmRvdy5tYXRjaE1lZGlhXG5cbn0pO1xuXG5cblxuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogTElOS1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogQW50aSBzcGFtIHByb3RlY3Rpb24gZm9yIGVtYWlsIGFkZHJlc3Nlc1xuICpcbiAqL1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcblxuICAvKipcbiAgICogVGhpcyBzbmlwcGV0IHNsaWdodGx5IOKAmG9iZnVzY2F0ZXPigJkgZW1haWwgYWRkcmVzc2VzIHRvIG1ha2UgaXQgaGFyZGVyIGZvclxuICAgKiBzcGFtYm90cyB0byBoYXJ2ZXN0IHRoZW0sIHdoaWxlIHN0aWxsIG9mZmVyaW5nIGEgcmVhZGFibGUgYWRkcmVzcyB0byB2aXNpdG9ycy5cbiAgICogPGEgaHJlZj1cIm1haWx0bzpmb28oYXQpZ21haWwoZG90KWNvbVwiPuKApjwvYT5cbiAgICog4oaSXG4gICAqIDxhIGhyZWY9XCJtYWlsdG86Zm9vQHBvbHlsb2cucnVcIj7igKY8L2E+XG4gICAqL1xuXG4gICQoJy5qcy1jb250YWN0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhyZWYgPSB0aGlzLmhyZWYucmVwbGFjZSgnKGF0KWdtYWlsJywgJ0Bwb2x5bG9nJykucmVwbGFjZSgnKGRvdCljb20nLCAnLnJ1Jyk7XG4gIH0pO1xufSk7XG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgdmFyIHN3aXRjaGVkID0gZmFsc2U7XG4gIHZhciB1cGRhdGVUYWJsZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoKCQod2luZG93KS53aWR0aCgpIDwgNzY3KSAmJiAhc3dpdGNoZWQgKXtcbiAgICAgIHN3aXRjaGVkID0gdHJ1ZTtcbiAgICAgICQoJy50YWJsZS1yZXNwb25zaXZlJykuZWFjaChmdW5jdGlvbihpLCBlbGVtZW50KSB7XG4gICAgICAgIHNwbGl0VGFibGUoJChlbGVtZW50KSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzd2l0Y2hlZCAmJiAoJCh3aW5kb3cpLndpZHRoKCkgPiA3NjcpKSB7XG4gICAgICBzd2l0Y2hlZCA9IGZhbHNlO1xuICAgICAgJCgnLnRhYmxlLXJlc3BvbnNpdmUnKS5lYWNoKGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcbiAgICAgICAgdW5zcGxpdFRhYmxlKCQoZWxlbWVudCkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5sb2FkKHVwZGF0ZVRhYmxlcyk7XG4gICQod2luZG93KS5vbigncmVkcmF3JyxmdW5jdGlvbigpe3N3aXRjaGVkPWZhbHNlO3VwZGF0ZVRhYmxlcygpO30pOyAvLyBBbiBldmVudCB0byBsaXN0ZW4gZm9yXG4gICQod2luZG93KS5vbigncmVzaXplJywgdXBkYXRlVGFibGVzKTtcblxuXG4gIGZ1bmN0aW9uIHNwbGl0VGFibGUob3JpZ2luYWwpXG4gIHtcbiAgICBvcmlnaW5hbC53cmFwKCc8ZGl2IGNsYXNzPVxcJ3RhYmxlLXdyYXBwZXJcXCcgLz4nKTtcblxuICAgIHZhciBjb3B5ID0gb3JpZ2luYWwuY2xvbmUoKTtcbiAgICBjb3B5LmZpbmQoJ3RkOm5vdCg6Zmlyc3QtY2hpbGQpLCB0aDpub3QoOmZpcnN0LWNoaWxkKScpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgY29weS5yZW1vdmVDbGFzcygncmVzcG9uc2l2ZScpO1xuXG4gICAgb3JpZ2luYWwuY2xvc2VzdCgnLnRhYmxlLXdyYXBwZXInKS5hcHBlbmQoY29weSk7XG4gICAgY29weS53cmFwKCc8ZGl2IGNsYXNzPVxcJ3Bpbm5lZFxcJyAvPicpO1xuICAgIG9yaWdpbmFsLndyYXAoJzxkaXYgY2xhc3M9XFwnc2Nyb2xsYWJsZVxcJyAvPicpO1xuXG4gICAgc2V0Q2VsbEhlaWdodHMob3JpZ2luYWwsIGNvcHkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5zcGxpdFRhYmxlKG9yaWdpbmFsKSB7XG4gICAgb3JpZ2luYWwuY2xvc2VzdCgnLnRhYmxlLXdyYXBwZXInKS5maW5kKCcucGlubmVkJykucmVtb3ZlKCk7XG4gICAgb3JpZ2luYWwudW53cmFwKCk7XG4gICAgb3JpZ2luYWwudW53cmFwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDZWxsSGVpZ2h0cyhvcmlnaW5hbCwgY29weSkge1xuICAgIHZhciB0ciAgICAgID0gb3JpZ2luYWwuZmluZCgndHInKSxcbiAgICAgIHRyX2NvcHkgICA9IGNvcHkuZmluZCgndHInKSxcbiAgICAgIGhlaWdodHMgICA9IFtdO1xuXG4gICAgdHIuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIHZhciBzZWxmICA9ICQodGhpcyksXG4gICAgICAgIHR4ICAgICAgPSBzZWxmLmZpbmQoJ3RoLCB0ZCcpO1xuXG4gICAgICB0eC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgIGhlaWdodHNbaW5kZXhdID0gaGVpZ2h0c1tpbmRleF0gfHwgMDtcbiAgICAgICAgaWYgKGhlaWdodCA+IGhlaWdodHNbaW5kZXhdKSBoZWlnaHRzW2luZGV4XSA9IGhlaWdodDtcbiAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICB0cl9jb3B5LmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAkKHRoaXMpLmhlaWdodChoZWlnaHRzW2luZGV4XSk7XG4gICAgfSk7XG4gIH1cblxufSk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBTRUFSQ0hcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogU2V0IHBsYWNlaG9sZGVyIHRleHRcbiAqL1xuY29uc3Qgc2V0U2VhcmNoUGxhY2Vob2xkZXIgPSAoKSA9PiB7XG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dzYy1pLWlkMScpO1xuICBjb25zdCBsYW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKTtcblxuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDU3NXB4KScpLm1hdGNoZXMpIHtcbiAgICBpbnB1dC5wbGFjZWhvbGRlciA9IChsYW5nID09PSAncnUnKSA/ICfQn9C+0LjRgdC6JyA6ICdTaXRlIHNlYXJjaCc7XG4gIH0gZWxzZSBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDU3NnB4KSBhbmQgKG1heC13aWR0aDogOTkxcHgpJykubWF0Y2hlcykge1xuICAgIGlucHV0LnBsYWNlaG9sZGVyID0gKGxhbmcgPT09ICdydScpID8gJ9Cf0L7QuNGB0Lo6IFBSLCBldmVudC3QvNC10L3QtdC00LbQvNC10L3RgicgOiAnU2VhcmNoIFBSIGFuZCBldmVudCBtYW5hZ2VtZW50JztcbiAgfSBlbHNlIHtcbiAgICBpbnB1dC5wbGFjZWhvbGRlciA9IChsYW5nID09PSAncnUnKSA/ICfQn9C+0LjRgdC6OiBQUiwg0L7RgNCz0LDQvdC40LfQsNGG0LjRjyDQvNC10YDQvtC/0YDQuNGP0YLQuNC5LCBJVC3RgNC10YjQtdC90LjRjycgOiAnU2VhcmNoIFBSLCBldmVudCBtYW5hZ2VtZW50IGFuZCBJVCBzb2x1dGlvbnMnO1xuICB9XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgc2V0U2VhcmNoUGxhY2Vob2xkZXIoKTtcblxuICBjb25zdCBzZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdzYy1jb250cm9sLXdyYXBwZXItY3NlID4gLmdzYy1zZWFyY2gtYm94Jyk7XG4gIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdzaWJfYSA+IC5nc2MtaW5wdXQnKTtcbiAgY29uc3Qgc2VhcmNoQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fc2VhcmNoLWNhbmNlbCcpO1xuXG4gIC8vIFNob3cgZm9ybVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5oZWFkZXJfX3NlYXJjaC10b2dnbGVyJykpIHtcbiAgICAgIHNlYXJjaEZvcm0uY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuICAgICAgc2VhcmNoQ2FuY2VsLmNsYXNzTGlzdC5hZGQoJ2lzLXZpc2libGUnKTtcbiAgICAgIHNlYXJjaElucHV0LmZvY3VzKCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG5cbiAgLy8gSGlkZSBmb3JtXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcygnLmhlYWRlcl9fc2VhcmNoLWNhbmNlbCcpKSB7XG4gICAgICBzZWFyY2hGb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZpc2libGUnKTtcbiAgICAgIHNlYXJjaENhbmNlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy12aXNpYmxlJyk7XG4gICAgICAvLyBzZWFyY2hJbnB1dC5ibHVyKCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59LCBmYWxzZSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gIHNldFNlYXJjaFBsYWNlaG9sZGVyKCk7XG59LCBmYWxzZSk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDQVJPVVNFTFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiBQcmV2ZW50aW5nIGNhcm91c2VsIGZyb20gYXV0byBzbGlkaW5nLlxuICogTGlua3MgdG8gc3BlY2lmaWMgc2xpZGUgZnJvbSBpbm5lciBwYWdlcy5cbiAqIFN3aXBpbmcgdG8gZ28gYmFjayBhbmQgZm9ydGggYmV0d2VlbiB0aGUgc2xpZGVzLlxuICogQ2hhbmdlIGJvZHkgYmFja2dyb3VuZCBjb2xvciB0byB5ZWxsb3cgYW5kIHZpY2UgdmVyc2EuXG4gKiBTZXQgc2xpZGUgY291bnRlciBpbiBmb290ZXIuXG4gKlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuXG4gIHZhciBjYXJvdXNlbCAgICAgPSAkKCcuY2Fyb3VzZWwnKTtcblxuICAvLyBQcmV2ZW50aW5nIEJvb3RzdHJhcCBjYXJvdXNlbCBmcm9tIGF1dG8gc2xpZGluZ1xuXG4gICQoJy5jYXJvdXNlbC5qcy1tYW51YWwnKS5jYXJvdXNlbCh7XG4gICAgaW50ZXJ2YWw6IDBcbiAgfSk7XG5cbiAvLyBBdXRvbWF0aWNhbGx5IGN5Y2xpbmcgY2Fyb3VzZWxcbiAgJCgnLmNhcm91c2VsLmpzLWF1dG8nKS5jYXJvdXNlbCh7XG4gICAgaW50ZXJ2YWw6IDEyMDAwXG4gIH0pO1xuXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBUb3VjaCBldmVudHNcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIFByZXZcbiAgICpcbiAgICogRm9yIHN3aXBlIHRvdWNoIGV2ZW50IGhlYWQgalF1ZXJ5IE1vYmlsZSwgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHdpdGhcbiAgICoganVzdCBUb3VjaCBhbmQgYWRkIGl0IHRvIHByb2plY3QuXG4gICAqIGpxdWVyeW1vYmlsZS5jb20vZG93bmxvYWQtYnVpbGRlci8gPT4gL3NyYy9qcy9qcXVlcnkubW9iaWxlLmN1c3RvbS5qc1xuICAgKi9cblxuICBjYXJvdXNlbC5zd2lwZXJpZ2h0KGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuY2Fyb3VzZWwoJ3ByZXYnKTtcbiAgfSk7XG5cbiAgLy8gTmV4dFxuXG4gIGNhcm91c2VsLnN3aXBlbGVmdChmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmNhcm91c2VsKCduZXh0Jyk7XG4gIH0pO1xuXG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIE9MRCBHQUxMRVJJRVNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcblxuICAvLyBPbGQgZ2FsbGVyeVxuICAvLyAxKSBDYW5jZWwgdGhlIGxpbmsgYmVoYXZpb3JcbiAgLy8gMikgQ3JlYXRlIGZpZ2NhcHRpb24gdGV4dFxuICAkKCdhW2RhdGEtcm9sZT1cImdhbGxlcnktdGJuXCJdLCBhW2RhdGEtcm9sZT1cImdhbGxlcnljb250cm9sXCJdLCBhW2RhdGEtd2lkZ2V0PVwiZ2FsbGVyeVwiXSwgYVtyZWwqPVwiZ2FsbGVyeVwiXScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblxuICAgIHZhciBocmVmICAgICAgID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgdmFyIGZpZ3VyZSAgICAgPSAkKHRoaXMpLmNsb3Nlc3QoJ2ZpZ3VyZS5nYWxsZXJ5LCAuc2VjLWdhbGxlcnknKS5jaGlsZHJlbignLm1lZGlhLXdyYXBwZXInKTtcbiAgICB2YXIgZmlnY2FwdGlvbiA9ICQoZmlndXJlLmNoaWxkcmVuKCdwJykpO1xuICAgIHZhciB0aXRsZTtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gMVxuXG4gICAgaWYgKCQodGhpcykuYXR0cigndGl0bGUnKSAmJiAkKGZpZ2NhcHRpb24pWzBdKSB7IC8vIDJcbiAgICAgIHRpdGxlID0gJCh0aGlzKS5hdHRyKCd0aXRsZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZSA9ICcnO1xuICAgIH1cblxuICAgICQoZmlndXJlLmNoaWxkcmVuKCdpbWcnKSkucmVtb3ZlKCk7XG4gICAgZmlnY2FwdGlvbi5lbXB0eSgpO1xuICAgIGZpZ3VyZS5wcmVwZW5kKCc8aW1nIHNyYz1cIicgKyBocmVmICsgJ1wiIGFsdD1cIicgKyB0aXRsZSArICdcIj4nKTtcbiAgICBmaWdjYXB0aW9uLmFwcGVuZCh0aXRsZSk7XG4gIH0pO1xuXG4gIC8vIFRoZSBvbGRlc3QgZ2FsbGVyeVxuICAvLyAxKSBDYW5jZWwgdGhlIGxpbmsgYmVoYXZpb3JcbiAgLy8gMikgTG9hZCBIVE1MIGluIGdhbGxlcnkgZnJhbWVcbiAgJCgnYS5sb2FkaW50by1nYWxsZXJ5JykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gMVxuICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgJCgnI2dhbGxlcnknKS5sb2FkKGhyZWYpOyAvLyAyXG4gIH0pO1xuXG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFJFU1BPTlNJVkUgRlVOQ1RJT05TXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbigoJCkgPT4ge1xuICAvKipcbiAgICogRGlzYWJsZSBEcm9wZG93bnMgb24gTW9iaWxlcyBhbmQgQ2hhbmdlIERyb3Bkb3ducyBUcmlnZ2VycyBvbiBMYXB0b3BzXG4gICAqL1xuICBmdW5jdGlvbiBjb250cm9sRHJvcGRvd25zKCkge1xuICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzY3cHgpJykubWF0Y2hlcykge1xuICAgICAgJCgnLmpzLW1lbnUtbGluaywgLm5hdmJhci1kcm9wZG93bi10b2dnbGUtc3BsaXQnKS5hdHRyKCdkYXRhLXRvZ2dsZScsICcnKTtcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDExOTlweCknKS5tYXRjaGVzKSB7XG4gICAgICAvKipcbiAgICAgICAqIFR1cm4gb2ZmIGRyb3Bkb3duIHRyaWdnZXIgYmVoYXZpb3Igb24gc3BsaXQgYnV0dG9uIGxpbmsgYW5kIHR1cm4gb24gaXRcbiAgICAgICAqIG9uIGxpbmtcbiAgICAgICAqL1xuICAgICAgJCgnLmpzLW1lbnUtbGluaycpLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJ2Ryb3Bkb3duJyk7XG4gICAgICAkKCcubmF2YmFyLWRyb3Bkb3duLXRvZ2dsZS1zcGxpdCcpLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIFR1cm4gb2ZmIGRyb3Bkb3duIHRyaWdnZXIgYmVoYXZpb3Igb24gbGluayBhbmQgdHVybiBvbiBpdCBvbiBzcGxpdFxuICAgICAgICogYnV0dG9uXG4gICAgICAgKi9cbiAgICAgICQoJy5qcy1tZW51LWxpbmsnKS5hdHRyKCdkYXRhLXRvZ2dsZScsICcnKTtcbiAgICAgICQoJy5uYXZiYXItZHJvcGRvd24tdG9nZ2xlLXNwbGl0JykuYXR0cignZGF0YS10b2dnbGUnLCAnZHJvcGRvd24nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGlkZSBkcm9wZG93biBhZnRlciBtb3VzZSBsZWF2ZWQgbmF2YmFyIGFyZWFcbiAgICovXG4gIC8vICQoJy5uYXZiYXItaXRlbS5kcm9wZG93bicpLm1vdXNlZW50ZXIoKGUpID0+IHtcbiAgLy8gICBjb25zdCBlbCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAvLyAgICAgICBpZiAoIWVsLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgLy8gICAgICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0sIDIwMDApO1xuICAvLyB9KTtcblxuICAvLyAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24nKS5tb3VzZWxlYXZlKChlKSA9PiB7XG4gIC8vICAgY29uc3QgZWwgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIC8vICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgLy8gICAgICAgaWYgKGVsLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgLy8gICAgICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0sIDE1MDApO1xuICAvLyB9KTtcblxuICAkKCcubmF2YmFyJykubW91c2VsZWF2ZSgoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdyAubmF2YmFyLWRyb3Bkb3duLXRvZ2dsZS1zcGxpdCcpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICQoJy5uYXZiYXItaXRlbS5kcm9wZG93bi5zaG93JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICB9LCAxNTAwKTtcbiAgfSk7XG5cblxuICAvKipcbiAgICogQ2hhbmdlIENUQSBMYWJlbFxuICAgKi9cbiAgZnVuY3Rpb24gY2hhbmdlQ1RBbGFiZWwoKSB7XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAxMjAwcHgpJykubWF0Y2hlcykge1xuICAgICAgJCgnLm5hdmJhci1idG4tcHJpbWFyeScpLnRleHQoJ9Ce0LHRgNCw0YLQvdCw0Y8g0YHQstGP0LfRjCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcubmF2YmFyLWJ0bi1wcmltYXJ5JykudGV4dCgn0J/QuNGI0LjRgtC1Jyk7XG4gICAgfVxuICB9XG5cbiAgLy8gRXhlY3V0ZSBvbiBkb2N1bWVudCByZWFkeVxuICAkKCgpID0+IHtcbiAgICBjb250cm9sRHJvcGRvd25zKCk7XG4gICAgY2hhbmdlQ1RBbGFiZWwoKTtcbiAgfSk7XG5cbiAgLy8gRXhlY3V0ZSBvbiB3aW5kb3cgcmVzaXplXG4gICQod2luZG93KS5yZXNpemUoKCkgPT4ge1xuICAgIGNvbnRyb2xEcm9wZG93bnMoKTtcbiAgICBjaGFuZ2VDVEFsYWJlbCgpO1xuICB9KTtcbn0pKGpRdWVyeSk7XG4iXX0=

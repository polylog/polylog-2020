document.querySelectorAll(".list-view-item br").forEach((e=>{e.style.display="none"})),(e=>{e('a[data-role="gallery-tbn"], a[data-role="gallerycontrol"], a[data-widget="gallery"], a[rel*="gallery"]').click((t=>{const a=e(this).attr("href"),o=e(this).closest("figure.gallery, .sec-gallery").children(".media-wrapper"),i=e(o.children("p"));let s;t.preventDefault(),s=e(this).attr("title")&&e(i)[0]?e(this).attr("title"):"",e(o.children("img")).remove(),i.empty(),o.prepend(`<img src="${a}" alt="${s}">`),i.append(s)}))})(jQuery),(()=>{const e=()=>{document.querySelector(".footer").classList.add("js-cta-hovered")},t=()=>{document.querySelector(".footer").classList.remove("js-cta-hovered")};document.querySelector(".btn.is-spinner")&&(document.querySelector(".btn.is-bottom-cta").addEventListener("mouseover",e),document.querySelector(".btn.is-bottom-cta").addEventListener("mouseout",t))})(),jQuery(document).ready((e=>{const t=e(".subscription .form-submit, .webform-client-form-3601 .form-submit"),a=e(".subscription .form-disclaimer, .webform-client-form-3601 .form-disclaimer");function o(){const t=e("#edit-submitted-form-services"),a=e(".webform-component--fieldset-fundraising"),o=e(".webform-component--fieldset-fundraising .optional-required");"fundraising"===t.val()&&a.is(":hidden")?(o.prop("required",!0),a.slideDown(1e3)):"fundraising"!==t.val()&&a.is(":visible")&&(o.removeProp("required"),a.slideUp(1e3))}e(".row.filter, #views-exposed-form-projects-page, #views-exposed-form-projects-en-page").prev(".page-header").css("border-radius","3px"),e(".section-blog.page-thanks .subscription input, .section-blog.page-thanks .subscription button").prop("disabled",!0),e(".form-select").change((function(){e(this).closest("form").find(".form-type-button").removeClass("disabled")})),window.matchMedia("(min-width: 992px)").matches&&(t.mouseover((()=>{a.addClass("open")})),e(document).on("click",(()=>{a.removeClass("open")})),e(document).keydown((e=>{27===e.keyCode&&a.removeClass("open")}))),e(".webform-component--fieldset-fundraising").hide(),e(".modal-content").on("change","#edit-submitted-form-services",o),e("#edit-submitted-form-services").on("change",o)})),jQuery(document).ready((e=>{e(".article > img:not([class]), .article-body > img:not([class]), .article-body > .image.image-_original").wrap('<div class="media-wrapper"></div>'),e(".sec-gallery > img:not([class]), figure.gallery > img:not([class]), #gallery > img:not([class])").wrap('<div class="media-wrapper"></div>'),e("img").error((function(){const t=e(this),a=t.parent("div");t.hide(),a.hide(),a.next(".gallery").hide()})),e(".js-mfp").magnificPopup({type:"image",tLoading:"",removalDelay:300,mainClass:"mfp-fade",fixedContentPos:!0}),e(".js-mfp-video").magnificPopup({type:"iframe",tLoading:"",mainClass:"mfp-fade",iframe:{patterns:{youtube:{src:"https://www.youtube.com/embed/%id%?rel=0&modestbranding=1&autohide=1&showinfo=0&autoplay=1"}}}});let t=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(t=!0)}catch(e){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=!0)}t?e(".video-flash.primary").addClass("play-it"):e(".video.fallback, .video-caption.fallback").addClass("play-it")})),jQuery(document).ready((e=>{e(".js-open-modal").on("click",(function(t){let a="";const o=e("#modal"),i=e(".modal-content");t.preventDefault(),a=e(this).is("a")?e(this).attr("href"):e(this).attr("data-href"),i.load(a+" .js-modal-content",(()=>{e(".webform-component--fieldset-fundraising").hide()})),o.on("hidden.bs.modal",(()=>{i.empty()}))})),e(document).keydown((t=>{27===t.keyCode&&e(".modal").hide}))})),jQuery(document).ready((e=>{e(".js-share").click((function(){const t=e(this),a=t.data("href");t.hasClass("email-md")||t.hasClass("whatsapp")?window.location.href=a:window.open(a,"shareWin","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")})),window.matchMedia("(min-width: 576px)").matches&&(e(".social-options.js-sticky").sticky({topSpacing:27}),e(window).scroll((()=>{const t=e(".social-options.js-sticky");e(".comments, .cta, .footer, .article-related, .out-of-bounds").is(":in-viewport")?t.addClass("hidden"):t.removeClass("hidden")})))})),document.querySelectorAll(".js-contact").forEach((e=>{e.href=e.href.replace("(at)gmail","@polylog").replace("(dot)com",".ru")}));const setSearchPlaceholder=()=>{const e=document.getElementById("gsc-i-id1"),t=document.getElementsByTagName("html")[0].getAttribute("lang");e&&(window.matchMedia("(max-width: 575px)").matches?e.placeholder="ru"===t?"Поиск":"Site search":window.matchMedia("(min-width: 576px) and (max-width: 991px)").matches?e.placeholder="ru"===t?"Поиск: PR, event-менеджмент":"Search PR and event management":e.placeholder="ru"===t?"Поиск: PR, организация мероприятий, IT-решения":"Search PR, event management and IT solutions")};window.addEventListener("load",(()=>{setSearchPlaceholder();const e=document.querySelector(".gsc-control-wrapper-cse > .gsc-search-box"),t=document.querySelector(".gsib_a > .gsc-input"),a=document.querySelector(".header__search-cancel");document.addEventListener("click",(o=>{o.target.closest(".header__search-toggler")&&(e.classList.add("is-visible"),a.classList.add("is-visible"),t.focus())}),!1),document.addEventListener("click",(t=>{t.target.matches(".header__search-cancel")&&(e.classList.remove("is-visible"),a.classList.remove("is-visible"))}),!1)}),!1),window.addEventListener("resize",(()=>{setSearchPlaceholder()}),!1),jQuery(document).ready((function(e){var t=e(".carousel");e(".carousel.js-manual").carousel({interval:0}),e(".carousel.js-auto").carousel({interval:12e3}),t.swiperight((function(){e(this).carousel("prev")})),t.swipeleft((function(){e(this).carousel("next")}))})),(e=>{function t(){window.matchMedia("(max-width: 767px)").matches?e(".js-menu-link, .navbar-dropdown-toggle-split").attr("data-toggle",""):window.matchMedia("(min-width: 768px) and (max-width: 1199px)").matches?(e(".js-menu-link").attr("data-toggle","dropdown"),e(".navbar-dropdown-toggle-split").attr("data-toggle","")):(e(".js-menu-link").attr("data-toggle",""),e(".navbar-dropdown-toggle-split").attr("data-toggle","dropdown"))}function a(){window.matchMedia("(min-width: 1200px)").matches?e(".navbar-btn-primary").text("Обратная связь"):e(".navbar-btn-primary").text("Пишите")}e(".navbar").mouseleave((()=>{setTimeout((()=>{e(".navbar-item.dropdown.show .navbar-dropdown-toggle-split").attr("aria-expanded","false"),e(".navbar-item.dropdown.show").removeClass("show")}),1500)})),e((()=>{t(),a()})),e(window).resize((()=>{t(),a()}))})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9sYWJzL2Fyai9zY3JpcHRzLmpzIiwiY29tcG9uZW50cy9mb290ZXIvZm9vdGVyLmpzIiwiY29tcG9uZW50cy9mb3JtL2Zvcm0uanMiLCJjb21wb25lbnRzL21lZGlhL21lZGlhLmpzIiwiY29tcG9uZW50cy9tb2RhbC9tb2RhbC5qcyIsImNvbXBvbmVudHMvc29jaWFsLXRvb2xzL3NvY2lhbC10b29scy5qcyIsImJhc2UvY29udGVudC9saW5rL2xpbmsuanMiLCJjb21wb25lbnRzL2Zvcm0vc2VhcmNoL3NlYXJjaC5qcyIsImNvbXBvbmVudHMvbWVkaWEvY2Fyb3VzZWwvY2Fyb3VzZWwuanMiLCJjb21wb25lbnRzL25hdi9uYXZiYXIvbmF2YmFyLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsInN0eWxlIiwiZGlzcGxheSIsIiQiLCJjbGljayIsImUiLCJocmVmIiwidGhpcyIsImF0dHIiLCJmaWd1cmUiLCJjbG9zZXN0IiwiY2hpbGRyZW4iLCJmaWdjYXB0aW9uIiwidGl0bGUiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZSIsImVtcHR5IiwicHJlcGVuZCIsImFwcGVuZCIsImpRdWVyeSIsInNwaW5UaGVGb290ZXJXaGVlbCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdG9wVGhlRm9vdGVyV2hlZWwiLCJhZGRFdmVudExpc3RlbmVyIiwicmVhZHkiLCIkc3Vic2NyaXB0aW9uQnRuIiwiJGRpc2NsYWltZXJUb29scHRpcCIsImZ1bmRyYWlzaW5nRGV0YWlscyIsIiRzZXJ2aWNlcyIsIiRmaWVsZHNldEZ1bmRyYWlzaW5nIiwiJGZ1bmRyYWlzaW5nUmVxdWlyZWQiLCJ2YWwiLCJpcyIsInByb3AiLCJzbGlkZURvd24iLCJyZW1vdmVQcm9wIiwic2xpZGVVcCIsInByZXYiLCJjc3MiLCJjaGFuZ2UiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsIm1vdXNlb3ZlciIsImFkZENsYXNzIiwib24iLCJrZXlkb3duIiwia2V5Q29kZSIsImhpZGUiLCJ3cmFwIiwiZXJyb3IiLCJ3cmFwcGVyIiwicGFyZW50IiwibmV4dCIsIm1hZ25pZmljUG9wdXAiLCJ0eXBlIiwidExvYWRpbmciLCJyZW1vdmFsRGVsYXkiLCJtYWluQ2xhc3MiLCJmaXhlZENvbnRlbnRQb3MiLCJpZnJhbWUiLCJwYXR0ZXJucyIsInlvdXR1YmUiLCJzcmMiLCJoYXNGbGFzaCIsIkFjdGl2ZVhPYmplY3QiLCJuYXZpZ2F0b3IiLCJtaW1lVHlwZXMiLCJ1bmRlZmluZWQiLCJlbmFibGVkUGx1Z2luIiwiJG1vZGFsIiwiJGNvbnRhaW5lciIsImxvYWQiLCJkYXRhIiwiaGFzQ2xhc3MiLCJsb2NhdGlvbiIsIm9wZW4iLCJzdGlja3kiLCJ0b3BTcGFjaW5nIiwic2Nyb2xsIiwicmVwbGFjZSIsInNldFNlYXJjaFBsYWNlaG9sZGVyIiwiaW5wdXQiLCJnZXRFbGVtZW50QnlJZCIsImxhbmciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEF0dHJpYnV0ZSIsInBsYWNlaG9sZGVyIiwic2VhcmNoRm9ybSIsInNlYXJjaElucHV0Iiwic2VhcmNoQ2FuY2VsIiwidGFyZ2V0IiwiZm9jdXMiLCJjYXJvdXNlbCIsImludGVydmFsIiwic3dpcGVyaWdodCIsInN3aXBlbGVmdCIsImNvbnRyb2xEcm9wZG93bnMiLCJjaGFuZ2VDVEFsYWJlbCIsInRleHQiLCJtb3VzZWxlYXZlIiwic2V0VGltZW91dCIsInJlc2l6ZSJdLCJtYXBwaW5ncyI6IkFBVUFBLFNBQUFDLGlCQUFBLHNCQUNBQyxTQUFBQyxJQUNBQSxFQUNBQyxNQUFBQyxRQUFBLFVBV0EsQ0FBQUMsSUFJQUEsRUFBQSwwR0FBQUMsT0FBQUMsSUFDQSxNQUFBQyxFQUFBSCxFQUFBSSxNQUFBQyxLQUFBLFFBQ0FDLEVBQUFOLEVBQUFJLE1BQUFHLFFBQUEsZ0NBQUFDLFNBQUEsa0JBQ0FDLEVBQUFULEVBQUFNLEVBQUFF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QSxhQW1DQSxTQUFBOEYsSUFDQTFELE9BQUFDLFdBQUEsdUJBQUFDLFFBQ0EzQyxFQUFBLHVCQUFBb0csS0FBQSxrQkFFQXBHLEVBQUEsdUJBQUFvRyxLQUFBLFVBZEFwRyxFQUFBLFdBQUFxRyxZQUFBLEtBQ0FDLFlBQUEsS0FDQXRHLEVBQUEsNERBQUFLLEtBQUEsZ0JBQUEsU0FDQUwsRUFBQSw4QkFBQXdDLFlBQUEsVUFDQSxTQWVBeEMsR0FBQSxLQUNBa0csSUFDQUMsT0FJQW5HLEVBQUF5QyxRQUFBOEQsUUFBQSxLQUNBTCxJQUNBQyxRQXhFQSxDQTBFQW5GIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBMSVNUIFZJRVdcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBzcmMvY29tcG9uZW50cy9saXN0LXZpZXcvbGlzdC12aWV3LmpzXG4gKiBSZW1vdmUgYnJlYWtzIGluIHRpdGxlIGxpc3RcbiAqXG4gKi9cblxuKCgpID0+IHtcbiAgY29uc3QgdGl0bGVMaXN0QnIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdC12aWV3LWl0ZW0gYnInKTtcbiAgdGl0bGVMaXN0QnIuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBjb25zdCBiciA9IGVsO1xuICAgIGJyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH0pO1xufSkoKTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogT0xEIEdBTExFUklFU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIC9zcmMvY29tcG9uZW50cy9tZWRpYS9nYWxsZXJ5L2xlZ2FjeS5qc1xuICovXG5cbigoJCkgPT4ge1xuICAvLyBPbGQgZ2FsbGVyeVxuICAvLyAxKSBDYW5jZWwgdGhlIGxpbmsgYmVoYXZpb3JcbiAgLy8gMikgQ3JlYXRlIGZpZ2NhcHRpb24gdGV4dFxuICAkKCdhW2RhdGEtcm9sZT1cImdhbGxlcnktdGJuXCJdLCBhW2RhdGEtcm9sZT1cImdhbGxlcnljb250cm9sXCJdLCBhW2RhdGEtd2lkZ2V0PVwiZ2FsbGVyeVwiXSwgYVtyZWwqPVwiZ2FsbGVyeVwiXScpLmNsaWNrKChlKSA9PiB7XG4gICAgY29uc3QgaHJlZiAgICAgICA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgIGNvbnN0IGZpZ3VyZSAgICAgPSAkKHRoaXMpLmNsb3Nlc3QoJ2ZpZ3VyZS5nYWxsZXJ5LCAuc2VjLWdhbGxlcnknKS5jaGlsZHJlbignLm1lZGlhLXdyYXBwZXInKTtcbiAgICBjb25zdCBmaWdjYXB0aW9uID0gJChmaWd1cmUuY2hpbGRyZW4oJ3AnKSk7XG4gICAgbGV0IHRpdGxlO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyAxXG5cbiAgICBpZiAoJCh0aGlzKS5hdHRyKCd0aXRsZScpICYmICQoZmlnY2FwdGlvbilbMF0pIHsgLy8gMlxuICAgICAgdGl0bGUgPSAkKHRoaXMpLmF0dHIoJ3RpdGxlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpdGxlID0gJyc7XG4gICAgfVxuXG4gICAgJChmaWd1cmUuY2hpbGRyZW4oJ2ltZycpKS5yZW1vdmUoKTtcbiAgICBmaWdjYXB0aW9uLmVtcHR5KCk7XG4gICAgZmlndXJlLnByZXBlbmQoYDxpbWcgc3JjPVwiJHtocmVmfVwiIGFsdD1cIiR7dGl0bGV9XCI+YCk7XG4gICAgZmlnY2FwdGlvbi5hcHBlbmQodGl0bGUpO1xuICB9KTtcbn0pKGpRdWVyeSk7XG5cbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEZvb3RlclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFNwaW4gZm9vdGVyIHdoZWVsIG9uIENUQSBob3ZlciBvbiB0aGUgQ2hpbmVzZSBhbmQgSmFwYW5lc2UgbGFuZGluZ3MuXG4gKi9cblxuKCgpID0+IHtcbiAgY29uc3Qgc3BpblRoZUZvb3RlcldoZWVsID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKS5jbGFzc0xpc3QuYWRkKCdqcy1jdGEtaG92ZXJlZCcpO1xuICB9O1xuXG4gIGNvbnN0IHN0b3BUaGVGb290ZXJXaGVlbCA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnanMtY3RhLWhvdmVyZWQnKTtcbiAgfTtcblxuICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLmlzLXNwaW5uZXInKTtcblxuICBpZiAoYnRuKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi5pcy1ib3R0b20tY3RhJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBzcGluVGhlRm9vdGVyV2hlZWwpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi5pcy1ib3R0b20tY3RhJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHN0b3BUaGVGb290ZXJXaGVlbCk7XG4gIH1cbn0pKCk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBGT1JNXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcblxuICBjb25zdCAkc3Vic2NyaXB0aW9uQnRuID0gJCgnLnN1YnNjcmlwdGlvbiAuZm9ybS1zdWJtaXQsIC53ZWJmb3JtLWNsaWVudC1mb3JtLTM2MDEgLmZvcm0tc3VibWl0Jyk7XG4gIGNvbnN0ICRkaXNjbGFpbWVyVG9vbHB0aXAgPSAkKCcuc3Vic2NyaXB0aW9uIC5mb3JtLWRpc2NsYWltZXIsIC53ZWJmb3JtLWNsaWVudC1mb3JtLTM2MDEgLmZvcm0tZGlzY2xhaW1lcicpO1xuXG4gIC8qKlxuICAgKiBSb3VuZCBjb3JuZXJzIG9mIHBhZ2UgaGVhZGVyIG9mIDJuZCBhbmQgdGhlIG5leHQgcndzdWx0IHBhZ2VzIGFuZCBsYXllZFxuICAgKiBvdXQgYWJvdmUgdGhlIHByb2plY3RzIGZpbHRlclxuICAgKi9cbiAgJCgnLnJvdy5maWx0ZXIsICN2aWV3cy1leHBvc2VkLWZvcm0tcHJvamVjdHMtcGFnZSwgI3ZpZXdzLWV4cG9zZWQtZm9ybS1wcm9qZWN0cy1lbi1wYWdlJykucHJldignLnBhZ2UtaGVhZGVyJykuY3NzKCdib3JkZXItcmFkaXVzJywgJzNweCcpO1xuXG4gIC8vIERpc2FibGUgc3Vic2NyaXB0aW9uIGZvcm0gb24gaXQgdGhhbmsgeW91IHBhZ2UuXG4gICQoJy5zZWN0aW9uLWJsb2cucGFnZS10aGFua3MgLnN1YnNjcmlwdGlvbiBpbnB1dCwgLnNlY3Rpb24tYmxvZy5wYWdlLXRoYW5rcyAuc3Vic2NyaXB0aW9uIGJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgLy8gVG9nbGUgZmlsdGVyIGJ1dHRvblxuICAkKCcuZm9ybS1zZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24gZW5hYmxlRmlsdGVyQnV0dG9uKCl7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmZvcm0tdHlwZS1idXR0b24nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gIH0pO1xuXG4gIC8vIFNob3cgZGlzY2xhaW1lciB0b29scHRpcCBvbiBzdWJzY3JpcHRpb25cbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA5OTJweCknKS5tYXRjaGVzKSB7XG4gICAgJHN1YnNjcmlwdGlvbkJ0bi5tb3VzZW92ZXIoKCkgPT4ge1xuICAgICAgJGRpc2NsYWltZXJUb29scHRpcC5hZGRDbGFzcygnb3BlbicpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgJGRpc2NsYWltZXJUb29scHRpcC5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkua2V5ZG93bigoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgJGRpc2NsYWltZXJUb29scHRpcC5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPR0dMRSBGVU5EUkFJU0lORyBGSUVMRFNFVFxuICAgKi9cbiAgZnVuY3Rpb24gZnVuZHJhaXNpbmdEZXRhaWxzICgpIHtcbiAgICBjb25zdCAkc2VydmljZXMgPSAkKCcjZWRpdC1zdWJtaXR0ZWQtZm9ybS1zZXJ2aWNlcycpO1xuICAgIGNvbnN0ICRmaWVsZHNldEZ1bmRyYWlzaW5nID0gJCgnLndlYmZvcm0tY29tcG9uZW50LS1maWVsZHNldC1mdW5kcmFpc2luZycpO1xuICAgIGNvbnN0ICRmdW5kcmFpc2luZ1JlcXVpcmVkID0gJCgnLndlYmZvcm0tY29tcG9uZW50LS1maWVsZHNldC1mdW5kcmFpc2luZyAub3B0aW9uYWwtcmVxdWlyZWQnKTtcblxuICAgIGlmKCRzZXJ2aWNlcy52YWwoKSA9PT0gJ2Z1bmRyYWlzaW5nJyAmJiAkZmllbGRzZXRGdW5kcmFpc2luZy5pcygnOmhpZGRlbicpKSB7XG4gICAgICAkZnVuZHJhaXNpbmdSZXF1aXJlZC5wcm9wKCdyZXF1aXJlZCcsdHJ1ZSk7XG4gICAgICAkZmllbGRzZXRGdW5kcmFpc2luZy5zbGlkZURvd24oMTAwMCk7XG4gICAgfSBlbHNlIGlmICgkc2VydmljZXMudmFsKCkgIT09ICdmdW5kcmFpc2luZycgJiYgJGZpZWxkc2V0RnVuZHJhaXNpbmcuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICRmdW5kcmFpc2luZ1JlcXVpcmVkLnJlbW92ZVByb3AoJ3JlcXVpcmVkJyk7XG4gICAgICAkZmllbGRzZXRGdW5kcmFpc2luZy5zbGlkZVVwKDEwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhpZGUgZmllbGRzZXQgb24gZnVsbCBwYWdlXG4gICQoJy53ZWJmb3JtLWNvbXBvbmVudC0tZmllbGRzZXQtZnVuZHJhaXNpbmcnKS5oaWRlKCk7XG5cbiAgLy8gVG9nZ2xlIGZpZWxkc2V0IGluIG1vZGFsXG4gICQoJy5tb2RhbC1jb250ZW50Jykub24oJ2NoYW5nZScsICcjZWRpdC1zdWJtaXR0ZWQtZm9ybS1zZXJ2aWNlcycsIGZ1bmRyYWlzaW5nRGV0YWlscyk7XG5cbiAgLy8gVG9nZ2xlIGZpZWxkc2V0IG9uIGZ1bGwgcGFnZVxuICAkKCcjZWRpdC1zdWJtaXR0ZWQtZm9ybS1zZXJ2aWNlcycpLm9uKCdjaGFuZ2UnLCBmdW5kcmFpc2luZ0RldGFpbHMpO1xufSk7XG5cblxuIiwiLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogTUVESUFcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeSgoJCkgPT4ge1xuXG4gIC8vIFdyYXAgaW1hZ2UgdG8gbWFrZSByb3VuZGVkIGNvbG9ycyBhbmQgc2VtaXRyYW5zcGFyZW50IGlubmVyIGJvcmRlclxuICAkKCcuYXJ0aWNsZSA+IGltZzpub3QoW2NsYXNzXSksIC5hcnRpY2xlLWJvZHkgPiBpbWc6bm90KFtjbGFzc10pLCAuYXJ0aWNsZS1ib2R5ID4gLmltYWdlLmltYWdlLV9vcmlnaW5hbCcpLndyYXAoJzxkaXYgY2xhc3M9XCJtZWRpYS13cmFwcGVyXCI+PC9kaXY+Jyk7XG4gICQoJy5zZWMtZ2FsbGVyeSA+IGltZzpub3QoW2NsYXNzXSksIGZpZ3VyZS5nYWxsZXJ5ID4gaW1nOm5vdChbY2xhc3NdKSwgI2dhbGxlcnkgPiBpbWc6bm90KFtjbGFzc10pJykud3JhcCgnPGRpdiBjbGFzcz1cIm1lZGlhLXdyYXBwZXJcIj48L2Rpdj4nKTtcblxuICAvLyBIaWRlIGJyb2tlbiBpbWFnZXNcbiAgJCgnaW1nJykuZXJyb3IoZnVuY3Rpb24gaGlkZUJyb2tlbkltZyAoKSB7XG4gICAgY29uc3QgZWwgPSAkKHRoaXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgIGNvbnN0IHdyYXBwZXIgPSBlbC5wYXJlbnQoJ2RpdicpO1xuICAgIGVsLmhpZGUoKTtcbiAgICB3cmFwcGVyLmhpZGUoKTtcbiAgICB3cmFwcGVyLm5leHQoJy5nYWxsZXJ5JykuaGlkZSgpO1xuICB9KTtcblxuICAvLyAxKSBWaWRlby4gUmVxdWlyZWQgVVJMIGZvcm1hdCBpc1xuICAvLyBodHRwOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL1B6Qms0LWF3WTQwXG4gIC8vIHdlIGNvdWxkIGFsc28gYWRkIHNvbWUgcGFyYW1ldGVyZXNcbiAgLy8gP3JlbD0wJm1vZGVzdGJyYW5kaW5nPTEmYXV0b2hpZGU9MSZzaG93aW5mbz0wJmF1dG9wbGF5PTFcbiAgLy8gQXZhaWxhYmxlIG9wdGlvbnMgOlxuICAvLyBwYWRkaW5nIFNwYWNlIGluc2lkZSBmYW5jeUJveCBhcm91bmQgY29udGVudFxuICAvLyBtYXJnaW4gTWluaW11bSBzcGFjZSBiZXR3ZWVuIHZpZXdwb3J0IGFuZCBmYW5jeUJveFxuICAvLyB3aWR0aCwgaGVpZ2h0LCBtaW5XaWR0aCwgbWluSGVpZ2h0XG4gIC8vIGF1dG9TaXplIElmIGZhbHNlLCB0aGUgYm94IHdpbGwgbm90IGJlIHJlc2l6ZWQgdG8gZml0IGNvbnRlbnRcbiAgLy8gYXV0b1Jlc2l6ZSBJZiBmYWxzZSwgdGhlIGNvbnRlbnQgd2lsbCBub3QgYmUgcmVzaXplZCBhZnRlciB3aW5kb3cgcmVzaXplXG4gIC8vIGNsb3NlQnRuXG4gIC8vIGV0YzogaHR0cDovL2ZhbmN5YXBwcy5jb20vZmFuY3lib3gvXG4gIC8vIDIpIEltYWdlXG4gIC8vIDMpIEltYWdlcyB3b24ndCBiZSBzY2FsZWQgdG8gZml0IHRvIGJyb3dzZXIncyBoZWlnaHRcbiAgLy8gNCkgSW1hZ2VzIHdvbid0IGV4Y2VlZCB0aGUgYnJvd3NlcidzIHdpZHRoXG5cbiAgLy8gJCgnLmpzLWZhbmN5Ym94LXZpZGVvJykuZmFuY3lib3goeyAvLyAxXG5cbiAgLy8gICBjbG9zZUVmZmVjdDogJ25vbmUnLFxuICAvLyAgIC8vIG9wZW5FZmZlY3Q6ICdlbGFzdGljJyxcbiAgLy8gICBwYWRkaW5nOiAxMixcbiAgLy8gICB0b3BSYXRpbzogLjMsXG4gIC8vICAgbWF4V2lkdGg6IDgwMCxcbiAgLy8gICBtYXhIZWlnaHQ6IDQ1OFxuXG4gIC8vIH0pO1xuXG4gIC8vICQoJy5qcy1mYW5jeWJveCcpLmZhbmN5Ym94KHsgLy8gMlxuICAvLyAgIGNsb3NlRWZmZWN0OiAnbm9uZScsXG4gIC8vICAgZml0VG9WaWV3OiBmYWxzZSwgLy8gM1xuICAvLyAgIG1heFdpZHRoOiAnOTglJywgLy8gNFxuICAvLyAgIHBhZGRpbmc6IDEyLFxuICAvLyAgIHRpdGxlU2hvdzogZmFsc2VcbiAgLy8gfSk7XG5cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgTWFnbmlmaWMgUG9wdXAgSW1hZ2VcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvLyAxKSBSZW1vdmUgdGV4dCBmcm9tIHByZWxvYWRlclxuICAvLyAyKSBTdHJpbmcgdGhhdCBjb250YWlucyBjbGFzc2VzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgcm9vdCBlbGVtZW50IG9mXG4gIC8vIHBvcHVwIHdyYXBwZXIgYW5kIHRvIGRhcmsgb3ZlcmxheVxuXG4gICQoJy5qcy1tZnAnKS5tYWduaWZpY1BvcHVwKHtcbiAgICB0eXBlOiAnaW1hZ2UnLFxuICAgIHRMb2FkaW5nOiAnJywgLy8gMVxuICAgIHJlbW92YWxEZWxheTogMzAwLFxuICAgIG1haW5DbGFzczogJ21mcC1mYWRlJywgLy8gMlxuICAgIGZpeGVkQ29udGVudFBvczogdHJ1ZVxuICB9KTtcblxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBNYWduaWZpYyBQb3B1cCBWaWRlb1xuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8vIDEpIFJlbW92ZSB0ZXh0IGZyb20gcHJlbG9hZGVyXG4gIC8vIDIpIEJ5IGRlZmF1bHQgTWFnbmlmaWMgUG9wdXAgc3VwcG9ydHMgb25seSBvbmUgdHlwZSBvZiBVUkwgZm9yIGVhY2hcbiAgLy8gc2VydmljZTpcbiAgLy8gWW91VHViZVxuICAvLyBodHRwOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9V1Y3NUgyb3FTdklcbiAgLy8gVmltZW9cbiAgLy8gaHR0cDovL3ZpbWVvLmNvbS8xMjMxMjNcbiAgLy8gR29vZ2xlIE1hcHNcbiAgLy8gaHR0cHM6Ly9tYXBzLmdvb2dsZS5jb20vbWFwcz9xPTIyMUIrQmFrZXIrU3RyZWV0LCtMb25kb24sK1VuaXRlZCtLaW5nZG9tJmhsPWVuJnQ9diZobmVhcj0yMjFCK0Jha2VyK1N0LCtMb25kb24rTlcxKzZYRSwrVW5pdGVkK0tpbmdkb21cbiAgLy8gMykgQnV0IGl0IGNhbiBiZSByZXdyaXRlZCB3LyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcblxuICAkKCcuanMtbWZwLXZpZGVvJykubWFnbmlmaWNQb3B1cCh7XG4gICAgdHlwZTogJ2lmcmFtZScsXG4gICAgdExvYWRpbmc6ICcnLCAvLyAxXG4gICAgbWFpbkNsYXNzOiAnbWZwLWZhZGUnLFxuXG4gICAgaWZyYW1lOiB7XG4gICAgICBwYXR0ZXJuczoge1xuICAgICAgICB5b3V0dWJlOiB7IC8vIDJcbiAgICAgICAgICBzcmM6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8laWQlP3JlbD0wJm1vZGVzdGJyYW5kaW5nPTEmYXV0b2hpZGU9MSZzaG93aW5mbz0wJmF1dG9wbGF5PTEnIC8vIDNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgIEZsYXNoXG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgbGV0IGhhc0ZsYXNoID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgY29uc3QgZm8gPSBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJyk7XG4gICAgaWYgKGZvKSB7XG4gICAgICBoYXNGbGFzaCA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKG5hdmlnYXRvci5taW1lVHlwZXNcbiAgICAgICYmIG5hdmlnYXRvci5taW1lVHlwZXNbJ2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ10gIT09IHVuZGVmaW5lZFxuICAgICAgJiYgbmF2aWdhdG9yLm1pbWVUeXBlc1snYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnXS5lbmFibGVkUGx1Z2luKSB7XG4gICAgICBoYXNGbGFzaCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYoaGFzRmxhc2gpIHtcbiAgICAkKCcudmlkZW8tZmxhc2gucHJpbWFyeScpLmFkZENsYXNzKCdwbGF5LWl0Jyk7XG4gIH0gZWxzZSB7XG4gICAgJCgnLnZpZGVvLmZhbGxiYWNrLCAudmlkZW8tY2FwdGlvbi5mYWxsYmFjaycpLmFkZENsYXNzKCdwbGF5LWl0Jyk7XG4gIH1cblxufSk7XG5cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLWludmFsaWQtdGhpcywgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIE1PREFMIFdJTkRPV1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogQWRkIGxvYWQoKSBtZXRob2QgdG8gQm9vdHN0cmFwIG1vZGFsc1xuICpcbiAqL1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KCgkKSA9PiB7XG4gIC8vIEZvciBzb21lIHJlYXNvbiwgdGhlIGFycm93IGZ1bmN0aW9uIGRvZXMgbm90IHdvcmsgaGVyZVxuICAkKCcuanMtb3Blbi1tb2RhbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgbGV0IGhyZWYgICAgICAgICA9ICcnO1xuICAgIGNvbnN0ICRtb2RhbCAgICAgPSAkKCcjbW9kYWwnKTtcbiAgICBjb25zdCAkY29udGFpbmVyID0gJCgnLm1vZGFsLWNvbnRlbnQnKTtcblxuICAgIC8vIENhbmNlbCB0aGUgbGluayBiZWhhdmlvclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICgkKHRoaXMpLmlzKCdhJykpIHtcbiAgICAgIGhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaHJlZiA9ICQodGhpcykuYXR0cignZGF0YS1ocmVmJyk7XG4gICAgfVxuXG4gICAgLy8gJGNvbnRhaW5lci5sb2FkKGAke2hyZWZ9IC5qcy1tb2RhbC1jb250ZW50YCk7XG5cbiAgICAkY29udGFpbmVyLmxvYWQoYCR7aHJlZn0gLmpzLW1vZGFsLWNvbnRlbnRgLCAoKSA9PiB7XG4gICAgICAkKCcud2ViZm9ybS1jb21wb25lbnQtLWZpZWxkc2V0LWZ1bmRyYWlzaW5nJykuaGlkZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gJGNvbnRhaW5lci5sb2FkKGAke2hyZWZ9IC5qcy1tb2RhbC1jb250ZW50YCwgKCkgPT4ge1xuICAgIC8vICAgbW9kYWwubW9kYWwoJ3Nob3cnKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIENsZWFyIG1vZGFsIGNvbnRlbnQgdG8gcHJldmVudCBzaG93IGl0IGJlZm9yZSBuZXcgZG9jdW1lbnQgaGFzIGJlZW4gbG9hZGVkXG4gICAgJG1vZGFsLm9uKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiB7XG4gICAgICAkY29udGFpbmVyLmVtcHR5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEhpZGUgbW9kYWwgb24gRXNjXG4gICQoZG9jdW1lbnQpLmtleWRvd24oKGUpID0+IHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgICAgJCgnLm1vZGFsJykuaGlkZTtcbiAgICAgIC8vICQoJy5tb2RhbCcpLnJlbW92ZUNsYXNzKCdpbicsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgIC8vICAgLy8gJCh0aGlzKS5oaWRlKDQwMCk7XG4gICAgICAvLyB9KTtcbiAgICB9XG4gIH0pO1xuXG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFNPQ0lBTCBTSEFSSU5HXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIE9wZW4gc2hhcmUgcG9wdXBcbiAqIFN0aWNreSBsaWtlJ24nc2hhcmUgYm94XG4gKlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoKCQpID0+IHtcblxuICAkKCcuanMtc2hhcmUnKS5jbGljayhmdW5jdGlvbiBzaGFyaW5nV2luICgpIHtcblxuICAgIGNvbnN0IGVsICAgPSAkKHRoaXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgIGNvbnN0IGhyZWYgPSBlbC5kYXRhKCdocmVmJyk7XG5cbiAgICBpZiAoZWwuaGFzQ2xhc3MoJ2VtYWlsLW1kJykgfHwgZWwuaGFzQ2xhc3MoJ3doYXRzYXBwJykpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93Lm9wZW4oaHJlZiwnc2hhcmVXaW4nLCAnbWVudWJhcj1ubyx0b29sYmFyPW5vLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsaGVpZ2h0PTYwMCx3aWR0aD02MDAnKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIE1ha2UgbGlrZSduJ3NoYXJlIGJveCBzdGlja3lcbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA1NzZweCknKS5tYXRjaGVzKSB7XG4gICAgJCgnLnNvY2lhbC1vcHRpb25zLmpzLXN0aWNreScpLnN0aWNreSh7dG9wU3BhY2luZzogMjd9KTtcblxuICAgIC8vIEhpZGUgYW5kIHNob3cgc3RpY2t5XG4gICAgJCh3aW5kb3cpLnNjcm9sbCgoKSA9PiB7XG5cbiAgICAgIGNvbnN0IHN0aWNreSA9ICQoJy5zb2NpYWwtb3B0aW9ucy5qcy1zdGlja3knKTtcbiAgICAgIGNvbnN0IGJvdHRvbU5laWdoYm9ycyA9ICQoJy5jb21tZW50cywgLmN0YSwgLmZvb3RlciwgLmFydGljbGUtcmVsYXRlZCwgLm91dC1vZi1ib3VuZHMnKTtcblxuICAgICAgaWYgKGJvdHRvbU5laWdoYm9ycy5pcygnOmluLXZpZXdwb3J0JykpIHtcbiAgICAgICAgc3RpY2t5LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0aWNreS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG5cbiAgICB9KTsgLy8gLyBlbmQ6IGhpZGUgYW5kIHNob3cgc3RpY2t5XG4gIH0gLy8gZW5kOiB3aW5kb3cubWF0Y2hNZWRpYVxuXG59KTtcblxuXG5cbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIExJTktTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIEFudGkgc3BhbSBwcm90ZWN0aW9uIGZvciBlbWFpbCBhZGRyZXNzZXNcbiAqXG4gKi9cblxuKCgpID0+IHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNvbnRhY3QnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGNvbnN0IGVtYWlsID0gZWw7XG4gICAgZW1haWwuaHJlZiA9IGVsLmhyZWZcbiAgICAgIC5yZXBsYWNlKCcoYXQpZ21haWwnLCAnQHBvbHlsb2cnKVxuICAgICAgLnJlcGxhY2UoJyhkb3QpY29tJywgJy5ydScpO1xuICB9KTtcbn0pKCk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBTRUFSQ0hcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogU2V0IHBsYWNlaG9sZGVyIHRleHRcbiAqL1xuY29uc3Qgc2V0U2VhcmNoUGxhY2Vob2xkZXIgPSAoKSA9PiB7XG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dzYy1pLWlkMScpO1xuICBjb25zdCBsYW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKTtcblxuICBpZiAoaW5wdXQpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDU3NXB4KScpLm1hdGNoZXMpIHtcbiAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gKGxhbmcgPT09ICdydScpID8gJ9Cf0L7QuNGB0LonIDogJ1NpdGUgc2VhcmNoJztcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA1NzZweCkgYW5kIChtYXgtd2lkdGg6IDk5MXB4KScpLm1hdGNoZXMpIHtcbiAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gKGxhbmcgPT09ICdydScpID8gJ9Cf0L7QuNGB0Lo6IFBSLCBldmVudC3QvNC10L3QtdC00LbQvNC10L3RgicgOiAnU2VhcmNoIFBSIGFuZCBldmVudCBtYW5hZ2VtZW50JztcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSAobGFuZyA9PT0gJ3J1JykgPyAn0J/QvtC40YHQujogUFIsINC+0YDQs9Cw0L3QuNC30LDRhtC40Y8g0LzQtdGA0L7Qv9GA0LjRj9GC0LjQuSwgSVQt0YDQtdGI0LXQvdC40Y8nIDogJ1NlYXJjaCBQUiwgZXZlbnQgbWFuYWdlbWVudCBhbmQgSVQgc29sdXRpb25zJztcbiAgICB9XG4gIH1cbn07XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICBzZXRTZWFyY2hQbGFjZWhvbGRlcigpO1xuXG4gIGNvbnN0IHNlYXJjaEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3NjLWNvbnRyb2wtd3JhcHBlci1jc2UgPiAuZ3NjLXNlYXJjaC1ib3gnKTtcbiAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3NpYl9hID4gLmdzYy1pbnB1dCcpO1xuICBjb25zdCBzZWFyY2hDYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19zZWFyY2gtY2FuY2VsJyk7XG5cbiAgLy8gU2hvdyBmb3JtXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmhlYWRlcl9fc2VhcmNoLXRvZ2dsZXInKSkge1xuICAgICAgc2VhcmNoRm9ybS5jbGFzc0xpc3QuYWRkKCdpcy12aXNpYmxlJyk7XG4gICAgICBzZWFyY2hDYW5jZWwuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuICAgICAgc2VhcmNoSW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gIH0sIGZhbHNlKTtcblxuICAvLyBIaWRlIGZvcm1cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKCcuaGVhZGVyX19zZWFyY2gtY2FuY2VsJykpIHtcbiAgICAgIHNlYXJjaEZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpO1xuICAgICAgc2VhcmNoQ2FuY2VsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZpc2libGUnKTtcbiAgICAvLyBzZWFyY2hJbnB1dC5ibHVyKCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59LCBmYWxzZSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gIHNldFNlYXJjaFBsYWNlaG9sZGVyKCk7XG59LCBmYWxzZSk7XG4iLCIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDQVJPVVNFTFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiBQcmV2ZW50aW5nIGNhcm91c2VsIGZyb20gYXV0byBzbGlkaW5nLlxuICogTGlua3MgdG8gc3BlY2lmaWMgc2xpZGUgZnJvbSBpbm5lciBwYWdlcy5cbiAqIFN3aXBpbmcgdG8gZ28gYmFjayBhbmQgZm9ydGggYmV0d2VlbiB0aGUgc2xpZGVzLlxuICogQ2hhbmdlIGJvZHkgYmFja2dyb3VuZCBjb2xvciB0byB5ZWxsb3cgYW5kIHZpY2UgdmVyc2EuXG4gKiBTZXQgc2xpZGUgY291bnRlciBpbiBmb290ZXIuXG4gKlxuICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuXG4gIHZhciBjYXJvdXNlbCAgICAgPSAkKCcuY2Fyb3VzZWwnKTtcblxuICAvLyBQcmV2ZW50aW5nIEJvb3RzdHJhcCBjYXJvdXNlbCBmcm9tIGF1dG8gc2xpZGluZ1xuXG4gICQoJy5jYXJvdXNlbC5qcy1tYW51YWwnKS5jYXJvdXNlbCh7XG4gICAgaW50ZXJ2YWw6IDBcbiAgfSk7XG5cbiAvLyBBdXRvbWF0aWNhbGx5IGN5Y2xpbmcgY2Fyb3VzZWxcbiAgJCgnLmNhcm91c2VsLmpzLWF1dG8nKS5jYXJvdXNlbCh7XG4gICAgaW50ZXJ2YWw6IDEyMDAwXG4gIH0pO1xuXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBUb3VjaCBldmVudHNcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIFByZXZcbiAgICpcbiAgICogRm9yIHN3aXBlIHRvdWNoIGV2ZW50IGhlYWQgalF1ZXJ5IE1vYmlsZSwgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHdpdGhcbiAgICoganVzdCBUb3VjaCBhbmQgYWRkIGl0IHRvIHByb2plY3QuXG4gICAqIGpxdWVyeW1vYmlsZS5jb20vZG93bmxvYWQtYnVpbGRlci8gPT4gL3NyYy9qcy9qcXVlcnkubW9iaWxlLmN1c3RvbS5qc1xuICAgKi9cblxuICBjYXJvdXNlbC5zd2lwZXJpZ2h0KGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuY2Fyb3VzZWwoJ3ByZXYnKTtcbiAgfSk7XG5cbiAgLy8gTmV4dFxuXG4gIGNhcm91c2VsLnN3aXBlbGVmdChmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmNhcm91c2VsKCduZXh0Jyk7XG4gIH0pO1xuXG59KTtcbiIsIi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFJFU1BPTlNJVkUgRlVOQ1RJT05TXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbigoJCkgPT4ge1xuICAvKipcbiAgICogRGlzYWJsZSBEcm9wZG93bnMgb24gTW9iaWxlcyBhbmQgQ2hhbmdlIERyb3Bkb3ducyBUcmlnZ2VycyBvbiBMYXB0b3BzXG4gICAqL1xuICBmdW5jdGlvbiBjb250cm9sRHJvcGRvd25zKCkge1xuICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzY3cHgpJykubWF0Y2hlcykge1xuICAgICAgJCgnLmpzLW1lbnUtbGluaywgLm5hdmJhci1kcm9wZG93bi10b2dnbGUtc3BsaXQnKS5hdHRyKCdkYXRhLXRvZ2dsZScsICcnKTtcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDExOTlweCknKS5tYXRjaGVzKSB7XG4gICAgICAvKipcbiAgICAgICAqIFR1cm4gb2ZmIGRyb3Bkb3duIHRyaWdnZXIgYmVoYXZpb3Igb24gc3BsaXQgYnV0dG9uIGxpbmsgYW5kIHR1cm4gb24gaXRcbiAgICAgICAqIG9uIGxpbmtcbiAgICAgICAqL1xuICAgICAgJCgnLmpzLW1lbnUtbGluaycpLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJ2Ryb3Bkb3duJyk7XG4gICAgICAkKCcubmF2YmFyLWRyb3Bkb3duLXRvZ2dsZS1zcGxpdCcpLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIFR1cm4gb2ZmIGRyb3Bkb3duIHRyaWdnZXIgYmVoYXZpb3Igb24gbGluayBhbmQgdHVybiBvbiBpdCBvbiBzcGxpdFxuICAgICAgICogYnV0dG9uXG4gICAgICAgKi9cbiAgICAgICQoJy5qcy1tZW51LWxpbmsnKS5hdHRyKCdkYXRhLXRvZ2dsZScsICcnKTtcbiAgICAgICQoJy5uYXZiYXItZHJvcGRvd24tdG9nZ2xlLXNwbGl0JykuYXR0cignZGF0YS10b2dnbGUnLCAnZHJvcGRvd24nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGlkZSBkcm9wZG93biBhZnRlciBtb3VzZSBsZWF2ZWQgbmF2YmFyIGFyZWFcbiAgICovXG4gIC8vICQoJy5uYXZiYXItaXRlbS5kcm9wZG93bicpLm1vdXNlZW50ZXIoKGUpID0+IHtcbiAgLy8gICBjb25zdCBlbCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAvLyAgICAgICBpZiAoIWVsLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgLy8gICAgICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0sIDIwMDApO1xuICAvLyB9KTtcblxuICAvLyAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24nKS5tb3VzZWxlYXZlKChlKSA9PiB7XG4gIC8vICAgY29uc3QgZWwgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIC8vICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgLy8gICAgICAgaWYgKGVsLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgLy8gICAgICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0sIDE1MDApO1xuICAvLyB9KTtcblxuICAkKCcubmF2YmFyJykubW91c2VsZWF2ZSgoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkKCcubmF2YmFyLWl0ZW0uZHJvcGRvd24uc2hvdyAubmF2YmFyLWRyb3Bkb3duLXRvZ2dsZS1zcGxpdCcpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICQoJy5uYXZiYXItaXRlbS5kcm9wZG93bi5zaG93JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICB9LCAxNTAwKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENoYW5nZSBDVEEgTGFiZWxcbiAgICovXG4gIGZ1bmN0aW9uIGNoYW5nZUNUQWxhYmVsKCkge1xuICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTIwMHB4KScpLm1hdGNoZXMpIHtcbiAgICAgICQoJy5uYXZiYXItYnRuLXByaW1hcnknKS50ZXh0KCfQntCx0YDQsNGC0L3QsNGPINGB0LLRj9C30YwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnLm5hdmJhci1idG4tcHJpbWFyeScpLnRleHQoJ9Cf0LjRiNC40YLQtScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEV4ZWN1dGUgb24gZG9jdW1lbnQgcmVhZHlcbiAgJCgoKSA9PiB7XG4gICAgY29udHJvbERyb3Bkb3ducygpO1xuICAgIGNoYW5nZUNUQWxhYmVsKCk7XG4gIH0pO1xuXG4gIC8vIEV4ZWN1dGUgb24gd2luZG93IHJlc2l6ZVxuICAkKHdpbmRvdykucmVzaXplKCgpID0+IHtcbiAgICBjb250cm9sRHJvcGRvd25zKCk7XG4gICAgY2hhbmdlQ1RBbGFiZWwoKTtcbiAgfSk7XG59KShqUXVlcnkpO1xuIl19
